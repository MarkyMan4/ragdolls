var be=Object.defineProperty;var Ge=(I,L,A)=>L in I?be(I,L,{enumerable:!0,configurable:!0,writable:!0,value:A}):I[L]=A;var U=(I,L,A)=>(Ge(I,typeof L!="symbol"?L+"":L,A),A);(function(){const L=document.createElement("link").relList;if(L&&L.supports&&L.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))E(v);new MutationObserver(v=>{for(const e of v)if(e.type==="childList")for(const l of e.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&E(l)}).observe(document,{childList:!0,subtree:!0});function A(v){const e={};return v.integrity&&(e.integrity=v.integrity),v.referrerpolicy&&(e.referrerPolicy=v.referrerpolicy),v.crossorigin==="use-credentials"?e.credentials="include":v.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function E(v){if(v.ep)return;v.ep=!0;const e=A(v);fetch(v.href,e)}})();var de=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},D={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(I,L){(function(E,v){I.exports=v()})(de,function(){return function(A){var E={};function v(e){if(E[e])return E[e].exports;var l=E[e]={i:e,l:!1,exports:{}};return A[e].call(l.exports,l,l.exports,v),l.l=!0,l.exports}return v.m=A,v.c=E,v.d=function(e,l,o){v.o(e,l)||Object.defineProperty(e,l,{enumerable:!0,get:o})},v.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},v.t=function(e,l){if(l&1&&(e=v(e)),l&8||l&4&&typeof e=="object"&&e&&e.__esModule)return e;var o=Object.create(null);if(v.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),l&2&&typeof e!="string")for(var s in e)v.d(o,s,function(h){return e[h]}.bind(null,s));return o},v.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return v.d(l,"a",l),l},v.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)},v.p="",v(v.s=21)}([function(A,E){var v={};A.exports=v,function(){v._nextId=0,v._seed=0,v._nowStartTime=+new Date,v._warnedOnce={},v._decomp=null,v.extend=function(l,o){var s,h;typeof o=="boolean"?(s=2,h=o):(s=1,h=!0);for(var a=s;a<arguments.length;a++){var f=arguments[a];if(f)for(var i in f)h&&f[i]&&f[i].constructor===Object&&(!l[i]||l[i].constructor===Object)?(l[i]=l[i]||{},v.extend(l[i],h,f[i])):l[i]=f[i]}return l},v.clone=function(l,o){return v.extend({},o,l)},v.keys=function(l){if(Object.keys)return Object.keys(l);var o=[];for(var s in l)o.push(s);return o},v.values=function(l){var o=[];if(Object.keys){for(var s=Object.keys(l),h=0;h<s.length;h++)o.push(l[s[h]]);return o}for(var a in l)o.push(l[a]);return o},v.get=function(l,o,s,h){o=o.split(".").slice(s,h);for(var a=0;a<o.length;a+=1)l=l[o[a]];return l},v.set=function(l,o,s,h,a){var f=o.split(".").slice(h,a);return v.get(l,o,0,-1)[f[f.length-1]]=s,s},v.shuffle=function(l){for(var o=l.length-1;o>0;o--){var s=Math.floor(v.random()*(o+1)),h=l[o];l[o]=l[s],l[s]=h}return l},v.choose=function(l){return l[Math.floor(v.random()*l.length)]},v.isElement=function(l){return typeof HTMLElement<"u"?l instanceof HTMLElement:!!(l&&l.nodeType&&l.nodeName)},v.isArray=function(l){return Object.prototype.toString.call(l)==="[object Array]"},v.isFunction=function(l){return typeof l=="function"},v.isPlainObject=function(l){return typeof l=="object"&&l.constructor===Object},v.isString=function(l){return toString.call(l)==="[object String]"},v.clamp=function(l,o,s){return l<o?o:l>s?s:l},v.sign=function(l){return l<0?-1:1},v.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-v._nowStartTime},v.random=function(l,o){return l=typeof l<"u"?l:0,o=typeof o<"u"?o:1,l+e()*(o-l)};var e=function(){return v._seed=(v._seed*9301+49297)%233280,v._seed/233280};v.colorToNumber=function(l){return l=l.replace("#",""),l.length==3&&(l=l.charAt(0)+l.charAt(0)+l.charAt(1)+l.charAt(1)+l.charAt(2)+l.charAt(2)),parseInt(l,16)},v.logLevel=1,v.log=function(){console&&v.logLevel>0&&v.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},v.info=function(){console&&v.logLevel>0&&v.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},v.warn=function(){console&&v.logLevel>0&&v.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},v.warnOnce=function(){var l=Array.prototype.slice.call(arguments).join(" ");v._warnedOnce[l]||(v.warn(l),v._warnedOnce[l]=!0)},v.deprecated=function(l,o,s){l[o]=v.chain(function(){v.warnOnce("\u{1F505} deprecated \u{1F505}",s)},l[o])},v.nextId=function(){return v._nextId++},v.indexOf=function(l,o){if(l.indexOf)return l.indexOf(o);for(var s=0;s<l.length;s++)if(l[s]===o)return s;return-1},v.map=function(l,o){if(l.map)return l.map(o);for(var s=[],h=0;h<l.length;h+=1)s.push(o(l[h]));return s},v.topologicalSort=function(l){var o=[],s=[],h=[];for(var a in l)!s[a]&&!h[a]&&v._topologicalSort(a,s,h,l,o);return o},v._topologicalSort=function(l,o,s,h,a){var f=h[l]||[];s[l]=!0;for(var i=0;i<f.length;i+=1){var t=f[i];s[t]||o[t]||v._topologicalSort(t,o,s,h,a)}s[l]=!1,o[l]=!0,a.push(l)},v.chain=function(){for(var l=[],o=0;o<arguments.length;o+=1){var s=arguments[o];s._chained?l.push.apply(l,s._chained):l.push(s)}var h=function(){for(var a,f=new Array(arguments.length),i=0,t=arguments.length;i<t;i++)f[i]=arguments[i];for(i=0;i<l.length;i+=1){var n=l[i].apply(a,f);typeof n<"u"&&(a=n)}return a};return h._chained=l,h},v.chainPathBefore=function(l,o,s){return v.set(l,o,v.chain(s,v.get(l,o)))},v.chainPathAfter=function(l,o,s){return v.set(l,o,v.chain(v.get(l,o),s))},v.setDecomp=function(l){v._decomp=l},v.getDecomp=function(){var l=v._decomp;try{!l&&typeof window<"u"&&(l=window.decomp),!l&&typeof de<"u"&&(l=de.decomp)}catch{l=null}return l}}()},function(A,E){var v={};A.exports=v,function(){v.create=function(e){var l={min:{x:0,y:0},max:{x:0,y:0}};return e&&v.update(l,e),l},v.update=function(e,l,o){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var s=0;s<l.length;s++){var h=l[s];h.x>e.max.x&&(e.max.x=h.x),h.x<e.min.x&&(e.min.x=h.x),h.y>e.max.y&&(e.max.y=h.y),h.y<e.min.y&&(e.min.y=h.y)}o&&(o.x>0?e.max.x+=o.x:e.min.x+=o.x,o.y>0?e.max.y+=o.y:e.min.y+=o.y)},v.contains=function(e,l){return l.x>=e.min.x&&l.x<=e.max.x&&l.y>=e.min.y&&l.y<=e.max.y},v.overlaps=function(e,l){return e.min.x<=l.max.x&&e.max.x>=l.min.x&&e.max.y>=l.min.y&&e.min.y<=l.max.y},v.translate=function(e,l){e.min.x+=l.x,e.max.x+=l.x,e.min.y+=l.y,e.max.y+=l.y},v.shift=function(e,l){var o=e.max.x-e.min.x,s=e.max.y-e.min.y;e.min.x=l.x,e.max.x=l.x+o,e.min.y=l.y,e.max.y=l.y+s}}()},function(A,E){var v={};A.exports=v,function(){v.create=function(e,l){return{x:e||0,y:l||0}},v.clone=function(e){return{x:e.x,y:e.y}},v.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},v.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},v.rotate=function(e,l,o){var s=Math.cos(l),h=Math.sin(l);o||(o={});var a=e.x*s-e.y*h;return o.y=e.x*h+e.y*s,o.x=a,o},v.rotateAbout=function(e,l,o,s){var h=Math.cos(l),a=Math.sin(l);s||(s={});var f=o.x+((e.x-o.x)*h-(e.y-o.y)*a);return s.y=o.y+((e.x-o.x)*a+(e.y-o.y)*h),s.x=f,s},v.normalise=function(e){var l=v.magnitude(e);return l===0?{x:0,y:0}:{x:e.x/l,y:e.y/l}},v.dot=function(e,l){return e.x*l.x+e.y*l.y},v.cross=function(e,l){return e.x*l.y-e.y*l.x},v.cross3=function(e,l,o){return(l.x-e.x)*(o.y-e.y)-(l.y-e.y)*(o.x-e.x)},v.add=function(e,l,o){return o||(o={}),o.x=e.x+l.x,o.y=e.y+l.y,o},v.sub=function(e,l,o){return o||(o={}),o.x=e.x-l.x,o.y=e.y-l.y,o},v.mult=function(e,l){return{x:e.x*l,y:e.y*l}},v.div=function(e,l){return{x:e.x/l,y:e.y/l}},v.perp=function(e,l){return l=l===!0?-1:1,{x:l*-e.y,y:l*e.x}},v.neg=function(e){return{x:-e.x,y:-e.y}},v.angle=function(e,l){return Math.atan2(l.y-e.y,l.x-e.x)},v._temp=[v.create(),v.create(),v.create(),v.create(),v.create(),v.create()]}()},function(A,E,v){var e={};A.exports=e;var l=v(2),o=v(0);(function(){e.create=function(s,h){for(var a=[],f=0;f<s.length;f++){var i=s[f],t={x:i.x,y:i.y,index:f,body:h,isInternal:!1};a.push(t)}return a},e.fromPath=function(s,h){var a=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return s.replace(a,function(i,t,n){f.push({x:parseFloat(t),y:parseFloat(n)})}),e.create(f,h)},e.centre=function(s){for(var h=e.area(s,!0),a={x:0,y:0},f,i,t,n=0;n<s.length;n++)t=(n+1)%s.length,f=l.cross(s[n],s[t]),i=l.mult(l.add(s[n],s[t]),f),a=l.add(a,i);return l.div(a,6*h)},e.mean=function(s){for(var h={x:0,y:0},a=0;a<s.length;a++)h.x+=s[a].x,h.y+=s[a].y;return l.div(h,s.length)},e.area=function(s,h){for(var a=0,f=s.length-1,i=0;i<s.length;i++)a+=(s[f].x-s[i].x)*(s[f].y+s[i].y),f=i;return h?a/2:Math.abs(a)/2},e.inertia=function(s,h){for(var a=0,f=0,i=s,t,n,r=0;r<i.length;r++)n=(r+1)%i.length,t=Math.abs(l.cross(i[n],i[r])),a+=t*(l.dot(i[n],i[n])+l.dot(i[n],i[r])+l.dot(i[r],i[r])),f+=t;return h/6*(a/f)},e.translate=function(s,h,a){a=typeof a<"u"?a:1;var f=s.length,i=h.x*a,t=h.y*a,n;for(n=0;n<f;n++)s[n].x+=i,s[n].y+=t;return s},e.rotate=function(s,h,a){if(h!==0){var f=Math.cos(h),i=Math.sin(h),t=a.x,n=a.y,r=s.length,u,d,C,w;for(w=0;w<r;w++)u=s[w],d=u.x-t,C=u.y-n,u.x=t+(d*f-C*i),u.y=n+(d*i+C*f);return s}},e.contains=function(s,h){for(var a=h.x,f=h.y,i=s.length,t=s[i-1],n,r=0;r<i;r++){if(n=s[r],(a-t.x)*(n.y-t.y)+(f-t.y)*(t.x-n.x)>0)return!1;t=n}return!0},e.scale=function(s,h,a,f){if(h===1&&a===1)return s;f=f||e.centre(s);for(var i,t,n=0;n<s.length;n++)i=s[n],t=l.sub(i,f),s[n].x=f.x+t.x*h,s[n].y=f.y+t.y*a;return s},e.chamfer=function(s,h,a,f,i){typeof h=="number"?h=[h]:h=h||[8],a=typeof a<"u"?a:-1,f=f||2,i=i||14;for(var t=[],n=0;n<s.length;n++){var r=s[n-1>=0?n-1:s.length-1],u=s[n],d=s[(n+1)%s.length],C=h[n<h.length?n:h.length-1];if(C===0){t.push(u);continue}var w=l.normalise({x:u.y-r.y,y:r.x-u.x}),c=l.normalise({x:d.y-u.y,y:u.x-d.x}),g=Math.sqrt(2*Math.pow(C,2)),x=l.mult(o.clone(w),C),p=l.normalise(l.mult(l.add(w,c),.5)),S=l.sub(u,l.mult(p,g)),y=a;a===-1&&(y=Math.pow(C,.32)*1.75),y=o.clamp(y,f,i),y%2===1&&(y+=1);for(var P=Math.acos(l.dot(w,c)),m=P/y,M=0;M<y;M++)t.push(l.add(l.rotate(x,m*M),S))}return t},e.clockwiseSort=function(s){var h=e.mean(s);return s.sort(function(a,f){return l.angle(h,a)-l.angle(h,f)}),s},e.isConvex=function(s){var h=0,a=s.length,f,i,t,n;if(a<3)return null;for(f=0;f<a;f++)if(i=(f+1)%a,t=(f+2)%a,n=(s[i].x-s[f].x)*(s[t].y-s[i].y),n-=(s[i].y-s[f].y)*(s[t].x-s[i].x),n<0?h|=1:n>0&&(h|=2),h===3)return!1;return h!==0?!0:null},e.hull=function(s){var h=[],a=[],f,i;for(s=s.slice(0),s.sort(function(t,n){var r=t.x-n.x;return r!==0?r:t.y-n.y}),i=0;i<s.length;i+=1){for(f=s[i];a.length>=2&&l.cross3(a[a.length-2],a[a.length-1],f)<=0;)a.pop();a.push(f)}for(i=s.length-1;i>=0;i-=1){for(f=s[i];h.length>=2&&l.cross3(h[h.length-2],h[h.length-1],f)<=0;)h.pop();h.push(f)}return h.pop(),a.pop(),h.concat(a)}})()},function(A,E,v){var e={};A.exports=e;var l=v(0);(function(){e.on=function(o,s,h){for(var a=s.split(" "),f,i=0;i<a.length;i++)f=a[i],o.events=o.events||{},o.events[f]=o.events[f]||[],o.events[f].push(h);return h},e.off=function(o,s,h){if(!s){o.events={};return}typeof s=="function"&&(h=s,s=l.keys(o.events).join(" "));for(var a=s.split(" "),f=0;f<a.length;f++){var i=o.events[a[f]],t=[];if(h&&i)for(var n=0;n<i.length;n++)i[n]!==h&&t.push(i[n]);o.events[a[f]]=t}},e.trigger=function(o,s,h){var a,f,i,t,n=o.events;if(n&&l.keys(n).length>0){h||(h={}),a=s.split(" ");for(var r=0;r<a.length;r++)if(f=a[r],i=n[f],i){t=l.clone(h,!1),t.name=f,t.source=o;for(var u=0;u<i.length;u++)i[u].apply(o,[t])}}}})()},function(A,E,v){var e={};A.exports=e;var l=v(4),o=v(0),s=v(1),h=v(6);(function(){e.create=function(a){return o.extend({id:o.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},a)},e.setModified=function(a,f,i,t){if(a.isModified=f,f&&a.cache&&(a.cache.allBodies=null,a.cache.allConstraints=null,a.cache.allComposites=null),i&&a.parent&&e.setModified(a.parent,f,i,t),t)for(var n=0;n<a.composites.length;n++){var r=a.composites[n];e.setModified(r,f,i,t)}},e.add=function(a,f){var i=[].concat(f);l.trigger(a,"beforeAdd",{object:f});for(var t=0;t<i.length;t++){var n=i[t];switch(n.type){case"body":if(n.parent!==n){o.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(a,n);break;case"constraint":e.addConstraint(a,n);break;case"composite":e.addComposite(a,n);break;case"mouseConstraint":e.addConstraint(a,n.constraint);break}}return l.trigger(a,"afterAdd",{object:f}),a},e.remove=function(a,f,i){var t=[].concat(f);l.trigger(a,"beforeRemove",{object:f});for(var n=0;n<t.length;n++){var r=t[n];switch(r.type){case"body":e.removeBody(a,r,i);break;case"constraint":e.removeConstraint(a,r,i);break;case"composite":e.removeComposite(a,r,i);break;case"mouseConstraint":e.removeConstraint(a,r.constraint);break}}return l.trigger(a,"afterRemove",{object:f}),a},e.addComposite=function(a,f){return a.composites.push(f),f.parent=a,e.setModified(a,!0,!0,!1),a},e.removeComposite=function(a,f,i){var t=o.indexOf(a.composites,f);if(t!==-1&&e.removeCompositeAt(a,t),i)for(var n=0;n<a.composites.length;n++)e.removeComposite(a.composites[n],f,!0);return a},e.removeCompositeAt=function(a,f){return a.composites.splice(f,1),e.setModified(a,!0,!0,!1),a},e.addBody=function(a,f){return a.bodies.push(f),e.setModified(a,!0,!0,!1),a},e.removeBody=function(a,f,i){var t=o.indexOf(a.bodies,f);if(t!==-1&&e.removeBodyAt(a,t),i)for(var n=0;n<a.composites.length;n++)e.removeBody(a.composites[n],f,!0);return a},e.removeBodyAt=function(a,f){return a.bodies.splice(f,1),e.setModified(a,!0,!0,!1),a},e.addConstraint=function(a,f){return a.constraints.push(f),e.setModified(a,!0,!0,!1),a},e.removeConstraint=function(a,f,i){var t=o.indexOf(a.constraints,f);if(t!==-1&&e.removeConstraintAt(a,t),i)for(var n=0;n<a.composites.length;n++)e.removeConstraint(a.composites[n],f,!0);return a},e.removeConstraintAt=function(a,f){return a.constraints.splice(f,1),e.setModified(a,!0,!0,!1),a},e.clear=function(a,f,i){if(i)for(var t=0;t<a.composites.length;t++)e.clear(a.composites[t],f,!0);return f?a.bodies=a.bodies.filter(function(n){return n.isStatic}):a.bodies.length=0,a.constraints.length=0,a.composites.length=0,e.setModified(a,!0,!0,!1),a},e.allBodies=function(a){if(a.cache&&a.cache.allBodies)return a.cache.allBodies;for(var f=[].concat(a.bodies),i=0;i<a.composites.length;i++)f=f.concat(e.allBodies(a.composites[i]));return a.cache&&(a.cache.allBodies=f),f},e.allConstraints=function(a){if(a.cache&&a.cache.allConstraints)return a.cache.allConstraints;for(var f=[].concat(a.constraints),i=0;i<a.composites.length;i++)f=f.concat(e.allConstraints(a.composites[i]));return a.cache&&(a.cache.allConstraints=f),f},e.allComposites=function(a){if(a.cache&&a.cache.allComposites)return a.cache.allComposites;for(var f=[].concat(a.composites),i=0;i<a.composites.length;i++)f=f.concat(e.allComposites(a.composites[i]));return a.cache&&(a.cache.allComposites=f),f},e.get=function(a,f,i){var t,n;switch(i){case"body":t=e.allBodies(a);break;case"constraint":t=e.allConstraints(a);break;case"composite":t=e.allComposites(a).concat(a);break}return t?(n=t.filter(function(r){return r.id.toString()===f.toString()}),n.length===0?null:n[0]):null},e.move=function(a,f,i){return e.remove(a,f),e.add(i,f),a},e.rebase=function(a){for(var f=e.allBodies(a).concat(e.allConstraints(a)).concat(e.allComposites(a)),i=0;i<f.length;i++)f[i].id=o.nextId();return a},e.translate=function(a,f,i){for(var t=i?e.allBodies(a):a.bodies,n=0;n<t.length;n++)h.translate(t[n],f);return a},e.rotate=function(a,f,i,t){for(var n=Math.cos(f),r=Math.sin(f),u=t?e.allBodies(a):a.bodies,d=0;d<u.length;d++){var C=u[d],w=C.position.x-i.x,c=C.position.y-i.y;h.setPosition(C,{x:i.x+(w*n-c*r),y:i.y+(w*r+c*n)}),h.rotate(C,f)}return a},e.scale=function(a,f,i,t,n){for(var r=n?e.allBodies(a):a.bodies,u=0;u<r.length;u++){var d=r[u],C=d.position.x-t.x,w=d.position.y-t.y;h.setPosition(d,{x:t.x+C*f,y:t.y+w*i}),h.scale(d,f,i)}return a},e.bounds=function(a){for(var f=e.allBodies(a),i=[],t=0;t<f.length;t+=1){var n=f[t];i.push(n.bounds.min,n.bounds.max)}return s.create(i)}})()},function(A,E,v){var e={};A.exports=e;var l=v(3),o=v(2),s=v(7);v(16);var h=v(0),a=v(1),f=v(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var n={id:h.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:l.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},r=h.extend(n,t);return i(r,t),r},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var i=function(t,n){n=n||{},e.set(t,{bounds:t.bounds||a.create(t.vertices),positionPrev:t.positionPrev||o.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),l.rotate(t.vertices,t.angle,t.position),f.rotate(t.axes,t.angle),a.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:n.axes||t.axes,area:n.area||t.area,mass:n.mass||t.mass,inertia:n.inertia||t.inertia});var r=t.isStatic?"#14151f":h.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),u=t.isStatic?"#555":"#ccc",d=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||r,t.render.strokeStyle=t.render.strokeStyle||u,t.render.lineWidth=t.render.lineWidth||d,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,n,r){var u;typeof n=="string"&&(u=n,n={},n[u]=r);for(u in n)if(!!Object.prototype.hasOwnProperty.call(n,u))switch(r=n[u],u){case"isStatic":e.setStatic(t,r);break;case"isSleeping":s.set(t,r);break;case"mass":e.setMass(t,r);break;case"density":e.setDensity(t,r);break;case"inertia":e.setInertia(t,r);break;case"vertices":e.setVertices(t,r);break;case"position":e.setPosition(t,r);break;case"angle":e.setAngle(t,r);break;case"velocity":e.setVelocity(t,r);break;case"angularVelocity":e.setAngularVelocity(t,r);break;case"parts":e.setParts(t,r);break;case"centre":e.setCentre(t,r);break;default:t[u]=r}},e.setStatic=function(t,n){for(var r=0;r<t.parts.length;r++){var u=t.parts[r];u.isStatic=n,n?(u._original={restitution:u.restitution,friction:u.friction,mass:u.mass,inertia:u.inertia,density:u.density,inverseMass:u.inverseMass,inverseInertia:u.inverseInertia},u.restitution=0,u.friction=1,u.mass=u.inertia=u.density=1/0,u.inverseMass=u.inverseInertia=0,u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.anglePrev=u.angle,u.angularVelocity=0,u.speed=0,u.angularSpeed=0,u.motion=0):u._original&&(u.restitution=u._original.restitution,u.friction=u._original.friction,u.mass=u._original.mass,u.inertia=u._original.inertia,u.density=u._original.density,u.inverseMass=u._original.inverseMass,u.inverseInertia=u._original.inverseInertia,u._original=null)}},e.setMass=function(t,n){var r=t.inertia/(t.mass/6);t.inertia=r*(n/6),t.inverseInertia=1/t.inertia,t.mass=n,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,n){e.setMass(t,n*t.area),t.density=n},e.setInertia=function(t,n){t.inertia=n,t.inverseInertia=1/t.inertia},e.setVertices=function(t,n){n[0].body===t?t.vertices=n:t.vertices=l.create(n,t),t.axes=f.fromVertices(t.vertices),t.area=l.area(t.vertices),e.setMass(t,t.density*t.area);var r=l.centre(t.vertices);l.translate(t.vertices,r,-1),e.setInertia(t,e._inertiaScale*l.inertia(t.vertices,t.mass)),l.translate(t.vertices,t.position),a.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,n,r){var u;for(n=n.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,u=0;u<n.length;u++){var d=n[u];d!==t&&(d.parent=t,t.parts.push(d))}if(t.parts.length!==1){if(r=typeof r<"u"?r:!0,r){var C=[];for(u=0;u<n.length;u++)C=C.concat(n[u].vertices);l.clockwiseSort(C);var w=l.hull(C),c=l.centre(w);e.setVertices(t,w),l.translate(t.vertices,c)}var g=e._totalProperties(t);t.area=g.area,t.parent=t,t.position.x=g.centre.x,t.position.y=g.centre.y,t.positionPrev.x=g.centre.x,t.positionPrev.y=g.centre.y,e.setMass(t,g.mass),e.setInertia(t,g.inertia),e.setPosition(t,g.centre)}},e.setCentre=function(t,n,r){r?(t.positionPrev.x+=n.x,t.positionPrev.y+=n.y,t.position.x+=n.x,t.position.y+=n.y):(t.positionPrev.x=n.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=n.y-(t.position.y-t.positionPrev.y),t.position.x=n.x,t.position.y=n.y)},e.setPosition=function(t,n){var r=o.sub(n,t.position);t.positionPrev.x+=r.x,t.positionPrev.y+=r.y;for(var u=0;u<t.parts.length;u++){var d=t.parts[u];d.position.x+=r.x,d.position.y+=r.y,l.translate(d.vertices,r),a.update(d.bounds,d.vertices,t.velocity)}},e.setAngle=function(t,n){var r=n-t.angle;t.anglePrev+=r;for(var u=0;u<t.parts.length;u++){var d=t.parts[u];d.angle+=r,l.rotate(d.vertices,r,t.position),f.rotate(d.axes,r),a.update(d.bounds,d.vertices,t.velocity),u>0&&o.rotateAbout(d.position,r,t.position,d.position)}},e.setVelocity=function(t,n){t.positionPrev.x=t.position.x-n.x,t.positionPrev.y=t.position.y-n.y,t.velocity.x=n.x,t.velocity.y=n.y,t.speed=o.magnitude(t.velocity)},e.setAngularVelocity=function(t,n){t.anglePrev=t.angle-n,t.angularVelocity=n,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,n){e.setPosition(t,o.add(t.position,n))},e.rotate=function(t,n,r){if(!r)e.setAngle(t,t.angle+n);else{var u=Math.cos(n),d=Math.sin(n),C=t.position.x-r.x,w=t.position.y-r.y;e.setPosition(t,{x:r.x+(C*u-w*d),y:r.y+(C*d+w*u)}),e.setAngle(t,t.angle+n)}},e.scale=function(t,n,r,u){var d=0,C=0;u=u||t.position;for(var w=0;w<t.parts.length;w++){var c=t.parts[w];l.scale(c.vertices,n,r,u),c.axes=f.fromVertices(c.vertices),c.area=l.area(c.vertices),e.setMass(c,t.density*c.area),l.translate(c.vertices,{x:-c.position.x,y:-c.position.y}),e.setInertia(c,e._inertiaScale*l.inertia(c.vertices,c.mass)),l.translate(c.vertices,{x:c.position.x,y:c.position.y}),w>0&&(d+=c.area,C+=c.inertia),c.position.x=u.x+(c.position.x-u.x)*n,c.position.y=u.y+(c.position.y-u.y)*r,a.update(c.bounds,c.vertices,t.velocity)}t.parts.length>1&&(t.area=d,t.isStatic||(e.setMass(t,t.density*d),e.setInertia(t,C))),t.circleRadius&&(n===r?t.circleRadius*=n:t.circleRadius=null)},e.update=function(t,n,r,u){var d=Math.pow(n*r*t.timeScale,2),C=1-t.frictionAir*r*t.timeScale,w=t.position.x-t.positionPrev.x,c=t.position.y-t.positionPrev.y;t.velocity.x=w*C*u+t.force.x/t.mass*d,t.velocity.y=c*C*u+t.force.y/t.mass*d,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*C*u+t.torque/t.inertia*d,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=o.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var g=0;g<t.parts.length;g++){var x=t.parts[g];l.translate(x.vertices,t.velocity),g>0&&(x.position.x+=t.velocity.x,x.position.y+=t.velocity.y),t.angularVelocity!==0&&(l.rotate(x.vertices,t.angularVelocity,t.position),f.rotate(x.axes,t.angularVelocity),g>0&&o.rotateAbout(x.position,t.angularVelocity,t.position,x.position)),a.update(x.bounds,x.vertices,t.velocity)}},e.applyForce=function(t,n,r){t.force.x+=r.x,t.force.y+=r.y;var u={x:n.x-t.position.x,y:n.y-t.position.y};t.torque+=u.x*r.y-u.y*r.x},e._totalProperties=function(t){for(var n={mass:0,area:0,inertia:0,centre:{x:0,y:0}},r=t.parts.length===1?0:1;r<t.parts.length;r++){var u=t.parts[r],d=u.mass!==1/0?u.mass:1;n.mass+=d,n.area+=u.area,n.inertia+=u.inertia,n.centre=o.add(n.centre,o.mult(u.position,d))}return n.centre=o.div(n.centre,n.mass),n}})()},function(A,E,v){var e={};A.exports=e;var l=v(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(o,s){for(var h=s*s*s,a=0;a<o.length;a++){var f=o[a],i=f.speed*f.speed+f.angularSpeed*f.angularSpeed;if(f.force.x!==0||f.force.y!==0){e.set(f,!1);continue}var t=Math.min(f.motion,i),n=Math.max(f.motion,i);f.motion=e._minBias*t+(1-e._minBias)*n,f.sleepThreshold>0&&f.motion<e._motionSleepThreshold*h?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold&&e.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},e.afterCollisions=function(o,s){for(var h=s*s*s,a=0;a<o.length;a++){var f=o[a];if(!!f.isActive){var i=f.collision,t=i.bodyA.parent,n=i.bodyB.parent;if(!(t.isSleeping&&n.isSleeping||t.isStatic||n.isStatic)&&(t.isSleeping||n.isSleeping)){var r=t.isSleeping&&!t.isStatic?t:n,u=r===t?n:t;!r.isStatic&&u.motion>e._motionWakeThreshold*h&&e.set(r,!1)}}}},e.set=function(o,s){var h=o.isSleeping;s?(o.isSleeping=!0,o.sleepCounter=o.sleepThreshold,o.positionImpulse.x=0,o.positionImpulse.y=0,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.anglePrev=o.angle,o.speed=0,o.angularSpeed=0,o.motion=0,h||l.trigger(o,"sleepStart")):(o.isSleeping=!1,o.sleepCounter=0,h&&l.trigger(o,"sleepEnd"))}})()},function(A,E,v){var e={};A.exports=e;var l=v(3),o=v(9);(function(){var s=[],h={overlap:0,axis:null},a={overlap:0,axis:null};e.create=function(f,i){return{pair:null,collided:!1,bodyA:f,bodyB:i,parentA:f.parent,parentB:i.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(f,i,t){if(e._overlapAxes(h,f.vertices,i.vertices,f.axes),h.overlap<=0||(e._overlapAxes(a,i.vertices,f.vertices,i.axes),a.overlap<=0))return null;var n=t&&t.table[o.id(f,i)],r;n?r=n.collision:(r=e.create(f,i),r.collided=!0,r.bodyA=f.id<i.id?f:i,r.bodyB=f.id<i.id?i:f,r.parentA=r.bodyA.parent,r.parentB=r.bodyB.parent),f=r.bodyA,i=r.bodyB;var u;h.overlap<a.overlap?u=h:u=a;var d=r.normal,C=r.supports,w=u.axis,c=w.x,g=w.y;c*(i.position.x-f.position.x)+g*(i.position.y-f.position.y)<0?(d.x=c,d.y=g):(d.x=-c,d.y=-g),r.tangent.x=-d.y,r.tangent.y=d.x,r.depth=u.overlap,r.penetration.x=d.x*r.depth,r.penetration.y=d.y*r.depth;var x=e._findSupports(f,i,d,1),p=0;if(l.contains(f.vertices,x[0])&&(C[p++]=x[0]),l.contains(f.vertices,x[1])&&(C[p++]=x[1]),p<2){var S=e._findSupports(i,f,d,-1);l.contains(i.vertices,S[0])&&(C[p++]=S[0]),p<2&&l.contains(i.vertices,S[1])&&(C[p++]=S[1])}return p===0&&(C[p++]=x[0]),C.length=p,r},e._overlapAxes=function(f,i,t,n){var r=i.length,u=t.length,d=i[0].x,C=i[0].y,w=t[0].x,c=t[0].y,g=n.length,x=Number.MAX_VALUE,p=0,S,y,P,m,M,B;for(M=0;M<g;M++){var T=n[M],R=T.x,F=T.y,V=d*R+C*F,W=w*R+c*F,O=V,H=W;for(B=1;B<r;B+=1)m=i[B].x*R+i[B].y*F,m>O?O=m:m<V&&(V=m);for(B=1;B<u;B+=1)m=t[B].x*R+t[B].y*F,m>H?H=m:m<W&&(W=m);if(y=O-W,P=H-V,S=y<P?y:P,S<x&&(x=S,p=M,S<=0))break}f.axis=n[p],f.overlap=x},e._projectToAxis=function(f,i,t){for(var n=i[0].x*t.x+i[0].y*t.y,r=n,u=1;u<i.length;u+=1){var d=i[u].x*t.x+i[u].y*t.y;d>r?r=d:d<n&&(n=d)}f.min=n,f.max=r},e._findSupports=function(f,i,t,n){var r=i.vertices,u=r.length,d=f.position.x,C=f.position.y,w=t.x*n,c=t.y*n,g=Number.MAX_VALUE,x,p,S,y,P;for(P=0;P<u;P+=1)p=r[P],y=w*(d-p.x)+c*(C-p.y),y<g&&(g=y,x=p);return S=r[(u+x.index-1)%u],g=w*(d-S.x)+c*(C-S.y),p=r[(x.index+1)%u],w*(d-p.x)+c*(C-p.y)<g?(s[0]=x,s[1]=p,s):(s[0]=x,s[1]=S,s)}})()},function(A,E,v){var e={};A.exports=e;var l=v(17);(function(){e.create=function(o,s){var h=o.bodyA,a=o.bodyB,f={id:e.id(h,a),bodyA:h,bodyB:a,collision:o,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:h.isSensor||a.isSensor,timeCreated:s,timeUpdated:s,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(f,o,s),f},e.update=function(o,s,h){var a=o.contacts,f=s.supports,i=o.activeContacts,t=s.parentA,n=s.parentB,r=t.vertices.length;o.isActive=!0,o.timeUpdated=h,o.collision=s,o.separation=s.depth,o.inverseMass=t.inverseMass+n.inverseMass,o.friction=t.friction<n.friction?t.friction:n.friction,o.frictionStatic=t.frictionStatic>n.frictionStatic?t.frictionStatic:n.frictionStatic,o.restitution=t.restitution>n.restitution?t.restitution:n.restitution,o.slop=t.slop>n.slop?t.slop:n.slop,s.pair=o,i.length=0;for(var u=0;u<f.length;u++){var d=f[u],C=d.body===t?d.index:r+d.index,w=a[C];w?i.push(w):i.push(a[C]=l.create(d))}},e.setActive=function(o,s,h){s?(o.isActive=!0,o.timeUpdated=h):(o.isActive=!1,o.activeContacts.length=0)},e.id=function(o,s){return o.id<s.id?"A"+o.id+"B"+s.id:"A"+s.id+"B"+o.id}})()},function(A,E,v){var e={};A.exports=e;var l=v(3),o=v(2),s=v(7),h=v(1),a=v(11),f=v(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(i){var t=i;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var n=t.bodyA?o.add(t.bodyA.position,t.pointA):t.pointA,r=t.bodyB?o.add(t.bodyB.position,t.pointB):t.pointB,u=o.magnitude(o.sub(n,r));t.length=typeof t.length<"u"?t.length:u,t.id=t.id||f.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var d={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(d.type="pin",d.anchors=!1):t.stiffness<.9&&(d.type="spring"),t.render=f.extend(d,t.render),t},e.preSolveAll=function(i){for(var t=0;t<i.length;t+=1){var n=i[t],r=n.constraintImpulse;n.isStatic||r.x===0&&r.y===0&&r.angle===0||(n.position.x+=r.x,n.position.y+=r.y,n.angle+=r.angle)}},e.solveAll=function(i,t){for(var n=0;n<i.length;n+=1){var r=i[n],u=!r.bodyA||r.bodyA&&r.bodyA.isStatic,d=!r.bodyB||r.bodyB&&r.bodyB.isStatic;(u||d)&&e.solve(i[n],t)}for(n=0;n<i.length;n+=1)r=i[n],u=!r.bodyA||r.bodyA&&r.bodyA.isStatic,d=!r.bodyB||r.bodyB&&r.bodyB.isStatic,!u&&!d&&e.solve(i[n],t)},e.solve=function(i,t){var n=i.bodyA,r=i.bodyB,u=i.pointA,d=i.pointB;if(!(!n&&!r)){n&&!n.isStatic&&(o.rotate(u,n.angle-i.angleA,u),i.angleA=n.angle),r&&!r.isStatic&&(o.rotate(d,r.angle-i.angleB,d),i.angleB=r.angle);var C=u,w=d;if(n&&(C=o.add(n.position,u)),r&&(w=o.add(r.position,d)),!(!C||!w)){var c=o.sub(C,w),g=o.magnitude(c);g<e._minLength&&(g=e._minLength);var x=(g-i.length)/g,p=i.stiffness<1?i.stiffness*t:i.stiffness,S=o.mult(c,x*p),y=(n?n.inverseMass:0)+(r?r.inverseMass:0),P=(n?n.inverseInertia:0)+(r?r.inverseInertia:0),m=y+P,M,B,T,R,F;if(i.damping){var V=o.create();T=o.div(c,g),F=o.sub(r&&o.sub(r.position,r.positionPrev)||V,n&&o.sub(n.position,n.positionPrev)||V),R=o.dot(T,F)}n&&!n.isStatic&&(B=n.inverseMass/y,n.constraintImpulse.x-=S.x*B,n.constraintImpulse.y-=S.y*B,n.position.x-=S.x*B,n.position.y-=S.y*B,i.damping&&(n.positionPrev.x-=i.damping*T.x*R*B,n.positionPrev.y-=i.damping*T.y*R*B),M=o.cross(u,S)/m*e._torqueDampen*n.inverseInertia*(1-i.angularStiffness),n.constraintImpulse.angle-=M,n.angle-=M),r&&!r.isStatic&&(B=r.inverseMass/y,r.constraintImpulse.x+=S.x*B,r.constraintImpulse.y+=S.y*B,r.position.x+=S.x*B,r.position.y+=S.y*B,i.damping&&(r.positionPrev.x+=i.damping*T.x*R*B,r.positionPrev.y+=i.damping*T.y*R*B),M=o.cross(d,S)/m*e._torqueDampen*r.inverseInertia*(1-i.angularStiffness),r.constraintImpulse.angle+=M,r.angle+=M)}}},e.postSolveAll=function(i){for(var t=0;t<i.length;t++){var n=i[t],r=n.constraintImpulse;if(!(n.isStatic||r.x===0&&r.y===0&&r.angle===0)){s.set(n,!1);for(var u=0;u<n.parts.length;u++){var d=n.parts[u];l.translate(d.vertices,r),u>0&&(d.position.x+=r.x,d.position.y+=r.y),r.angle!==0&&(l.rotate(d.vertices,r.angle,n.position),a.rotate(d.axes,r.angle),u>0&&o.rotateAbout(d.position,r.angle,n.position,d.position)),h.update(d.bounds,d.vertices,n.velocity)}r.angle*=e._warming,r.x*=e._warming,r.y*=e._warming}}},e.pointAWorld=function(i){return{x:(i.bodyA?i.bodyA.position.x:0)+i.pointA.x,y:(i.bodyA?i.bodyA.position.y:0)+i.pointA.y}},e.pointBWorld=function(i){return{x:(i.bodyB?i.bodyB.position.x:0)+i.pointB.x,y:(i.bodyB?i.bodyB.position.y:0)+i.pointB.y}}})()},function(A,E,v){var e={};A.exports=e;var l=v(2),o=v(0);(function(){e.fromVertices=function(s){for(var h={},a=0;a<s.length;a++){var f=(a+1)%s.length,i=l.normalise({x:s[f].y-s[a].y,y:s[a].x-s[f].x}),t=i.y===0?1/0:i.x/i.y;t=t.toFixed(3).toString(),h[t]=i}return o.values(h)},e.rotate=function(s,h){if(h!==0)for(var a=Math.cos(h),f=Math.sin(h),i=0;i<s.length;i++){var t=s[i],n;n=t.x*a-t.y*f,t.y=t.x*f+t.y*a,t.x=n}}})()},function(A,E,v){var e={};A.exports=e;var l=v(3),o=v(0),s=v(6),h=v(1),a=v(2);(function(){e.rectangle=function(f,i,t,n,r){r=r||{};var u={label:"Rectangle Body",position:{x:f,y:i},vertices:l.fromPath("L 0 0 L "+t+" 0 L "+t+" "+n+" L 0 "+n)};if(r.chamfer){var d=r.chamfer;u.vertices=l.chamfer(u.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax),delete r.chamfer}return s.create(o.extend({},u,r))},e.trapezoid=function(f,i,t,n,r,u){u=u||{},r*=.5;var d=(1-r*2)*t,C=t*r,w=C+d,c=w+C,g;r<.5?g="L 0 0 L "+C+" "+-n+" L "+w+" "+-n+" L "+c+" 0":g="L 0 0 L "+w+" "+-n+" L "+c+" 0";var x={label:"Trapezoid Body",position:{x:f,y:i},vertices:l.fromPath(g)};if(u.chamfer){var p=u.chamfer;x.vertices=l.chamfer(x.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete u.chamfer}return s.create(o.extend({},x,u))},e.circle=function(f,i,t,n,r){n=n||{};var u={label:"Circle Body",circleRadius:t};r=r||25;var d=Math.ceil(Math.max(10,Math.min(r,t)));return d%2===1&&(d+=1),e.polygon(f,i,d,t,o.extend({},u,n))},e.polygon=function(f,i,t,n,r){if(r=r||{},t<3)return e.circle(f,i,n,r);for(var u=2*Math.PI/t,d="",C=u*.5,w=0;w<t;w+=1){var c=C+w*u,g=Math.cos(c)*n,x=Math.sin(c)*n;d+="L "+g.toFixed(3)+" "+x.toFixed(3)+" "}var p={label:"Polygon Body",position:{x:f,y:i},vertices:l.fromPath(d)};if(r.chamfer){var S=r.chamfer;p.vertices=l.chamfer(p.vertices,S.radius,S.quality,S.qualityMin,S.qualityMax),delete r.chamfer}return s.create(o.extend({},p,r))},e.fromVertices=function(f,i,t,n,r,u,d,C){var w=o.getDecomp(),c,g,x,p,S,y,P,m,M,B,T;for(c=Boolean(w&&w.quickDecomp),n=n||{},x=[],r=typeof r<"u"?r:!1,u=typeof u<"u"?u:.01,d=typeof d<"u"?d:10,C=typeof C<"u"?C:.01,o.isArray(t[0])||(t=[t]),B=0;B<t.length;B+=1)if(y=t[B],p=l.isConvex(y),S=!p,S&&!c&&o.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),p||!c)p?y=l.clockwiseSort(y):y=l.hull(y),x.push({position:{x:f,y:i},vertices:y});else{var R=y.map(function(J){return[J.x,J.y]});w.makeCCW(R),u!==!1&&w.removeCollinearPoints(R,u),C!==!1&&w.removeDuplicatePoints&&w.removeDuplicatePoints(R,C);var F=w.quickDecomp(R);for(P=0;P<F.length;P++){var V=F[P],W=V.map(function(J){return{x:J[0],y:J[1]}});d>0&&l.area(W)<d||x.push({position:l.centre(W),vertices:W})}}for(P=0;P<x.length;P++)x[P]=s.create(o.extend(x[P],n));if(r){var O=5;for(P=0;P<x.length;P++){var H=x[P];for(m=P+1;m<x.length;m++){var G=x[m];if(h.overlaps(H.bounds,G.bounds)){var Z=H.vertices,b=G.vertices;for(M=0;M<H.vertices.length;M++)for(T=0;T<G.vertices.length;T++){var q=a.magnitudeSquared(a.sub(Z[(M+1)%Z.length],b[T])),$=a.magnitudeSquared(a.sub(Z[M],b[(T+1)%b.length]));q<O&&$<O&&(Z[M].isInternal=!0,b[T].isInternal=!0)}}}}}return x.length>1?(g=s.create(o.extend({parts:x.slice(0)},n)),s.setPosition(g,{x:f,y:i}),g):x[0]}})()},function(A,E,v){var e={};A.exports=e;var l=v(0);(function(){e.create=function(o){var s={};return o||l.log("Mouse.create: element was undefined, defaulting to document.body","warn"),s.element=o||document.body,s.absolute={x:0,y:0},s.position={x:0,y:0},s.mousedownPosition={x:0,y:0},s.mouseupPosition={x:0,y:0},s.offset={x:0,y:0},s.scale={x:1,y:1},s.wheelDelta=0,s.button=-1,s.pixelRatio=parseInt(s.element.getAttribute("data-pixel-ratio"),10)||1,s.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},s.mousemove=function(h){var a=e._getRelativeMousePosition(h,s.element,s.pixelRatio),f=h.changedTouches;f&&(s.button=0,h.preventDefault()),s.absolute.x=a.x,s.absolute.y=a.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.sourceEvents.mousemove=h},s.mousedown=function(h){var a=e._getRelativeMousePosition(h,s.element,s.pixelRatio),f=h.changedTouches;f?(s.button=0,h.preventDefault()):s.button=h.button,s.absolute.x=a.x,s.absolute.y=a.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.mousedownPosition.x=s.position.x,s.mousedownPosition.y=s.position.y,s.sourceEvents.mousedown=h},s.mouseup=function(h){var a=e._getRelativeMousePosition(h,s.element,s.pixelRatio),f=h.changedTouches;f&&h.preventDefault(),s.button=-1,s.absolute.x=a.x,s.absolute.y=a.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.mouseupPosition.x=s.position.x,s.mouseupPosition.y=s.position.y,s.sourceEvents.mouseup=h},s.mousewheel=function(h){s.wheelDelta=Math.max(-1,Math.min(1,h.wheelDelta||-h.detail)),h.preventDefault()},e.setElement(s,s.element),s},e.setElement=function(o,s){o.element=s,s.addEventListener("mousemove",o.mousemove),s.addEventListener("mousedown",o.mousedown),s.addEventListener("mouseup",o.mouseup),s.addEventListener("mousewheel",o.mousewheel),s.addEventListener("DOMMouseScroll",o.mousewheel),s.addEventListener("touchmove",o.mousemove),s.addEventListener("touchstart",o.mousedown),s.addEventListener("touchend",o.mouseup)},e.clearSourceEvents=function(o){o.sourceEvents.mousemove=null,o.sourceEvents.mousedown=null,o.sourceEvents.mouseup=null,o.sourceEvents.mousewheel=null,o.wheelDelta=0},e.setOffset=function(o,s){o.offset.x=s.x,o.offset.y=s.y,o.position.x=o.absolute.x*o.scale.x+o.offset.x,o.position.y=o.absolute.y*o.scale.y+o.offset.y},e.setScale=function(o,s){o.scale.x=s.x,o.scale.y=s.y,o.position.x=o.absolute.x*o.scale.x+o.offset.x,o.position.y=o.absolute.y*o.scale.y+o.offset.y},e._getRelativeMousePosition=function(o,s,h){var a=s.getBoundingClientRect(),f=document.documentElement||document.body.parentNode||document.body,i=window.pageXOffset!==void 0?window.pageXOffset:f.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:f.scrollTop,n=o.changedTouches,r,u;return n?(r=n[0].pageX-a.left-i,u=n[0].pageY-a.top-t):(r=o.pageX-a.left-i,u=o.pageY-a.top-t),{x:r/(s.clientWidth/(s.width||s.clientWidth)*h),y:u/(s.clientHeight/(s.height||s.clientHeight)*h)}}})()},function(A,E,v){var e={};A.exports=e;var l=v(0),o=v(8);(function(){e.create=function(s){var h={bodies:[],pairs:null};return l.extend(h,s)},e.setBodies=function(s,h){s.bodies=h.slice(0)},e.clear=function(s){s.bodies=[]},e.collisions=function(s){var h=[],a=s.pairs,f=s.bodies,i=f.length,t=e.canCollide,n=o.collides,r,u;for(f.sort(e._compareBoundsX),r=0;r<i;r++){var d=f[r],C=d.bounds,w=d.bounds.max.x,c=d.bounds.max.y,g=d.bounds.min.y,x=d.isStatic||d.isSleeping,p=d.parts.length,S=p===1;for(u=r+1;u<i;u++){var y=f[u],P=y.bounds;if(P.min.x>w)break;if(!(c<P.min.y||g>P.max.y)&&!(x&&(y.isStatic||y.isSleeping))&&!!t(d.collisionFilter,y.collisionFilter)){var m=y.parts.length;if(S&&m===1){var M=n(d,y,a);M&&h.push(M)}else for(var B=p>1?1:0,T=m>1?1:0,R=B;R<p;R++)for(var F=d.parts[R],C=F.bounds,V=T;V<m;V++){var W=y.parts[V],P=W.bounds;if(!(C.min.x>P.max.x||C.max.x<P.min.x||C.max.y<P.min.y||C.min.y>P.max.y)){var M=n(F,W,a);M&&h.push(M)}}}}}return h},e.canCollide=function(s,h){return s.group===h.group&&s.group!==0?s.group>0:(s.mask&h.category)!==0&&(h.mask&s.category)!==0},e._compareBoundsX=function(s,h){return s.bounds.min.x-h.bounds.min.x}})()},function(A,E,v){var e={};A.exports=e;var l=v(0);(function(){e._registry={},e.register=function(o){if(e.isPlugin(o)||l.warn("Plugin.register:",e.toString(o),"does not implement all required fields."),o.name in e._registry){var s=e._registry[o.name],h=e.versionParse(o.version).number,a=e.versionParse(s.version).number;h>a?(l.warn("Plugin.register:",e.toString(s),"was upgraded to",e.toString(o)),e._registry[o.name]=o):h<a?l.warn("Plugin.register:",e.toString(s),"can not be downgraded to",e.toString(o)):o!==s&&l.warn("Plugin.register:",e.toString(o),"is already registered to different plugin object")}else e._registry[o.name]=o;return o},e.resolve=function(o){return e._registry[e.dependencyParse(o).name]},e.toString=function(o){return typeof o=="string"?o:(o.name||"anonymous")+"@"+(o.version||o.range||"0.0.0")},e.isPlugin=function(o){return o&&o.name&&o.version&&o.install},e.isUsed=function(o,s){return o.used.indexOf(s)>-1},e.isFor=function(o,s){var h=o.for&&e.dependencyParse(o.for);return!o.for||s.name===h.name&&e.versionSatisfies(s.version,h.range)},e.use=function(o,s){if(o.uses=(o.uses||[]).concat(s||[]),o.uses.length===0){l.warn("Plugin.use:",e.toString(o),"does not specify any dependencies to install.");return}for(var h=e.dependencies(o),a=l.topologicalSort(h),f=[],i=0;i<a.length;i+=1)if(a[i]!==o.name){var t=e.resolve(a[i]);if(!t){f.push("\u274C "+a[i]);continue}e.isUsed(o,t.name)||(e.isFor(t,o)||(l.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(o)+"."),t._warned=!0),t.install?t.install(o):(l.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(f.push("\u{1F536} "+e.toString(t)),delete t._warned):f.push("\u2705 "+e.toString(t)),o.used.push(t.name))}f.length>0&&l.info(f.join("  "))},e.dependencies=function(o,s){var h=e.dependencyParse(o),a=h.name;if(s=s||{},!(a in s)){o=e.resolve(o)||o,s[a]=l.map(o.uses||[],function(i){e.isPlugin(i)&&e.register(i);var t=e.dependencyParse(i),n=e.resolve(i);return n&&!e.versionSatisfies(n.version,t.range)?(l.warn("Plugin.dependencies:",e.toString(n),"does not satisfy",e.toString(t),"used by",e.toString(h)+"."),n._warned=!0,o._warned=!0):n||(l.warn("Plugin.dependencies:",e.toString(i),"used by",e.toString(h),"could not be resolved."),o._warned=!0),t.name});for(var f=0;f<s[a].length;f+=1)e.dependencies(s[a][f],s);return s}},e.dependencyParse=function(o){if(l.isString(o)){var s=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return s.test(o)||l.warn("Plugin.dependencyParse:",o,"is not a valid dependency string."),{name:o.split("@")[0],range:o.split("@")[1]||"*"}}return{name:o.name,range:o.range||o.version}},e.versionParse=function(o){var s=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;s.test(o)||l.warn("Plugin.versionParse:",o,"is not a valid version or range.");var h=s.exec(o),a=Number(h[4]),f=Number(h[5]),i=Number(h[6]);return{isRange:Boolean(h[1]||h[2]),version:h[3],range:o,operator:h[1]||h[2]||"",major:a,minor:f,patch:i,parts:[a,f,i],prerelease:h[7],number:a*1e8+f*1e4+i}},e.versionSatisfies=function(o,s){s=s||"*";var h=e.versionParse(s),a=e.versionParse(o);if(h.isRange){if(h.operator==="*"||o==="*")return!0;if(h.operator===">")return a.number>h.number;if(h.operator===">=")return a.number>=h.number;if(h.operator==="~")return a.major===h.major&&a.minor===h.minor&&a.patch>=h.patch;if(h.operator==="^")return h.major>0?a.major===h.major&&a.number>=h.number:h.minor>0?a.minor===h.minor&&a.patch>=h.patch:a.patch===h.patch}return o===s||o==="*"}})()},function(A,E,v){var e={};A.exports=e;var l=v(0),o=v(5),s=v(1),h=v(4),a=v(2),f=v(13);(function(){var i,t;typeof window<"u"&&(i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(c){window.setTimeout(function(){c(l.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(c){var g={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!c.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},x=l.extend(g,c);return x.canvas&&(x.canvas.width=x.options.width||x.canvas.width,x.canvas.height=x.options.height||x.canvas.height),x.mouse=c.mouse,x.engine=c.engine,x.canvas=x.canvas||u(x.options.width,x.options.height),x.context=x.canvas.getContext("2d"),x.textures={},x.bounds=x.bounds||{min:{x:0,y:0},max:{x:x.canvas.width,y:x.canvas.height}},x.options.showBroadphase=!1,x.options.pixelRatio!==1&&e.setPixelRatio(x,x.options.pixelRatio),l.isElement(x.element)?x.element.appendChild(x.canvas):x.canvas.parentNode||l.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),x},e.run=function(c){(function g(x){c.frameRequestId=i(g),n(c,x),e.world(c,x),(c.options.showStats||c.options.showDebug)&&e.stats(c,c.context,x),(c.options.showPerformance||c.options.showDebug)&&e.performance(c,c.context,x)})()},e.stop=function(c){t(c.frameRequestId)},e.setPixelRatio=function(c,g){var x=c.options,p=c.canvas;g==="auto"&&(g=d(p)),x.pixelRatio=g,p.setAttribute("data-pixel-ratio",g),p.width=x.width*g,p.height=x.height*g,p.style.width=x.width+"px",p.style.height=x.height+"px"},e.lookAt=function(c,g,x,p){p=typeof p<"u"?p:!0,g=l.isArray(g)?g:[g],x=x||{x:0,y:0};for(var S={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},y=0;y<g.length;y+=1){var P=g[y],m=P.bounds?P.bounds.min:P.min||P.position||P,M=P.bounds?P.bounds.max:P.max||P.position||P;m&&M&&(m.x<S.min.x&&(S.min.x=m.x),M.x>S.max.x&&(S.max.x=M.x),m.y<S.min.y&&(S.min.y=m.y),M.y>S.max.y&&(S.max.y=M.y))}var B=S.max.x-S.min.x+2*x.x,T=S.max.y-S.min.y+2*x.y,R=c.canvas.height,F=c.canvas.width,V=F/R,W=B/T,O=1,H=1;W>V?H=W/V:O=V/W,c.options.hasBounds=!0,c.bounds.min.x=S.min.x,c.bounds.max.x=S.min.x+B*O,c.bounds.min.y=S.min.y,c.bounds.max.y=S.min.y+T*H,p&&(c.bounds.min.x+=B*.5-B*O*.5,c.bounds.max.x+=B*.5-B*O*.5,c.bounds.min.y+=T*.5-T*H*.5,c.bounds.max.y+=T*.5-T*H*.5),c.bounds.min.x-=x.x,c.bounds.max.x-=x.x,c.bounds.min.y-=x.y,c.bounds.max.y-=x.y,c.mouse&&(f.setScale(c.mouse,{x:(c.bounds.max.x-c.bounds.min.x)/c.canvas.width,y:(c.bounds.max.y-c.bounds.min.y)/c.canvas.height}),f.setOffset(c.mouse,c.bounds.min))},e.startViewTransform=function(c){var g=c.bounds.max.x-c.bounds.min.x,x=c.bounds.max.y-c.bounds.min.y,p=g/c.options.width,S=x/c.options.height;c.context.setTransform(c.options.pixelRatio/p,0,0,c.options.pixelRatio/S,0,0),c.context.translate(-c.bounds.min.x,-c.bounds.min.y)},e.endViewTransform=function(c){c.context.setTransform(c.options.pixelRatio,0,0,c.options.pixelRatio,0,0)},e.world=function(c,g){var x=l.now(),p=c.engine,S=p.world,y=c.canvas,P=c.context,m=c.options,M=c.timing,B=o.allBodies(S),T=o.allConstraints(S),R=m.wireframes?m.wireframeBackground:m.background,F=[],V=[],W,O={timestamp:p.timing.timestamp};if(h.trigger(c,"beforeRender",O),c.currentBackground!==R&&w(c,R),P.globalCompositeOperation="source-in",P.fillStyle="transparent",P.fillRect(0,0,y.width,y.height),P.globalCompositeOperation="source-over",m.hasBounds){for(W=0;W<B.length;W++){var H=B[W];s.overlaps(H.bounds,c.bounds)&&F.push(H)}for(W=0;W<T.length;W++){var G=T[W],Z=G.bodyA,b=G.bodyB,q=G.pointA,$=G.pointB;Z&&(q=a.add(Z.position,G.pointA)),b&&($=a.add(b.position,G.pointB)),!(!q||!$)&&(s.contains(c.bounds,q)||s.contains(c.bounds,$))&&V.push(G)}e.startViewTransform(c),c.mouse&&(f.setScale(c.mouse,{x:(c.bounds.max.x-c.bounds.min.x)/c.options.width,y:(c.bounds.max.y-c.bounds.min.y)/c.options.height}),f.setOffset(c.mouse,c.bounds.min))}else V=T,F=B,c.options.pixelRatio!==1&&c.context.setTransform(c.options.pixelRatio,0,0,c.options.pixelRatio,0,0);!m.wireframes||p.enableSleeping&&m.showSleeping?e.bodies(c,F,P):(m.showConvexHulls&&e.bodyConvexHulls(c,F,P),e.bodyWireframes(c,F,P)),m.showBounds&&e.bodyBounds(c,F,P),(m.showAxes||m.showAngleIndicator)&&e.bodyAxes(c,F,P),m.showPositions&&e.bodyPositions(c,F,P),m.showVelocity&&e.bodyVelocity(c,F,P),m.showIds&&e.bodyIds(c,F,P),m.showSeparations&&e.separations(c,p.pairs.list,P),m.showCollisions&&e.collisions(c,p.pairs.list,P),m.showVertexNumbers&&e.vertexNumbers(c,F,P),m.showMousePosition&&e.mousePosition(c,c.mouse,P),e.constraints(V,P),m.hasBounds&&e.endViewTransform(c),h.trigger(c,"afterRender",O),M.lastElapsed=l.now()-x},e.stats=function(c,g,x){for(var p=c.engine,S=p.world,y=o.allBodies(S),P=0,m=55,M=44,B=0,T=0,R=0;R<y.length;R+=1)P+=y[R].parts.length;var F={Part:P,Body:y.length,Cons:o.allConstraints(S).length,Comp:o.allComposites(S).length,Pair:p.pairs.list.length};g.fillStyle="#0e0f19",g.fillRect(B,T,m*5.5,M),g.font="12px Arial",g.textBaseline="top",g.textAlign="right";for(var V in F){var W=F[V];g.fillStyle="#aaa",g.fillText(V,B+m,T+8),g.fillStyle="#eee",g.fillText(W,B+m,T+26),B+=m}},e.performance=function(c,g){var x=c.engine,p=c.timing,S=p.deltaHistory,y=p.elapsedHistory,P=p.timestampElapsedHistory,m=p.engineDeltaHistory,M=p.engineElapsedHistory,B=x.timing.lastDelta,T=r(S),R=r(y),F=r(m),V=r(M),W=r(P),O=W/T||0,H=1e3/T||0,G=4,Z=12,b=60,q=34,$=10,J=69;g.fillStyle="#0e0f19",g.fillRect(0,50,Z*4+b*5+22,q),e.status(g,$,J,b,G,S.length,Math.round(H)+" fps",H/e._goodFps,function(Y){return S[Y]/T-1}),e.status(g,$+Z+b,J,b,G,m.length,B.toFixed(2)+" dt",e._goodDelta/B,function(Y){return m[Y]/F-1}),e.status(g,$+(Z+b)*2,J,b,G,M.length,V.toFixed(2)+" ut",1-V/e._goodFps,function(Y){return M[Y]/V-1}),e.status(g,$+(Z+b)*3,J,b,G,y.length,R.toFixed(2)+" rt",1-R/e._goodFps,function(Y){return y[Y]/R-1}),e.status(g,$+(Z+b)*4,J,b,G,P.length,O.toFixed(2)+" x",O*O*O,function(Y){return(P[Y]/S[Y]/O||0)-1})},e.status=function(c,g,x,p,S,y,P,m,M){c.strokeStyle="#888",c.fillStyle="#444",c.lineWidth=1,c.fillRect(g,x+7,p,1),c.beginPath(),c.moveTo(g,x+7-S*l.clamp(.4*M(0),-2,2));for(var B=0;B<p;B+=1)c.lineTo(g+B,x+7-(B<y?S*l.clamp(.4*M(B),-2,2):0));c.stroke(),c.fillStyle="hsl("+l.clamp(25+95*m,0,120)+",100%,60%)",c.fillRect(g,x-7,4,4),c.font="12px Arial",c.textBaseline="middle",c.textAlign="right",c.fillStyle="#eee",c.fillText(P,g+p,x-5)},e.constraints=function(c,g){for(var x=g,p=0;p<c.length;p++){var S=c[p];if(!(!S.render.visible||!S.pointA||!S.pointB)){var y=S.bodyA,P=S.bodyB,m,M;if(y?m=a.add(y.position,S.pointA):m=S.pointA,S.render.type==="pin")x.beginPath(),x.arc(m.x,m.y,3,0,2*Math.PI),x.closePath();else{if(P?M=a.add(P.position,S.pointB):M=S.pointB,x.beginPath(),x.moveTo(m.x,m.y),S.render.type==="spring")for(var B=a.sub(M,m),T=a.perp(a.normalise(B)),R=Math.ceil(l.clamp(S.length/5,12,20)),F,V=1;V<R;V+=1)F=V%2===0?1:-1,x.lineTo(m.x+B.x*(V/R)+T.x*F*4,m.y+B.y*(V/R)+T.y*F*4);x.lineTo(M.x,M.y)}S.render.lineWidth&&(x.lineWidth=S.render.lineWidth,x.strokeStyle=S.render.strokeStyle,x.stroke()),S.render.anchors&&(x.fillStyle=S.render.strokeStyle,x.beginPath(),x.arc(m.x,m.y,3,0,2*Math.PI),x.arc(M.x,M.y,3,0,2*Math.PI),x.closePath(),x.fill())}}},e.bodies=function(c,g,x){var p=x;c.engine;var S=c.options,y=S.showInternalEdges||!S.wireframes,P,m,M,B;for(M=0;M<g.length;M++)if(P=g[M],!!P.render.visible){for(B=P.parts.length>1?1:0;B<P.parts.length;B++)if(m=P.parts[B],!!m.render.visible){if(S.showSleeping&&P.isSleeping?p.globalAlpha=.5*m.render.opacity:m.render.opacity!==1&&(p.globalAlpha=m.render.opacity),m.render.sprite&&m.render.sprite.texture&&!S.wireframes){var T=m.render.sprite,R=C(c,T.texture);p.translate(m.position.x,m.position.y),p.rotate(m.angle),p.drawImage(R,R.width*-T.xOffset*T.xScale,R.height*-T.yOffset*T.yScale,R.width*T.xScale,R.height*T.yScale),p.rotate(-m.angle),p.translate(-m.position.x,-m.position.y)}else{if(m.circleRadius)p.beginPath(),p.arc(m.position.x,m.position.y,m.circleRadius,0,2*Math.PI);else{p.beginPath(),p.moveTo(m.vertices[0].x,m.vertices[0].y);for(var F=1;F<m.vertices.length;F++)!m.vertices[F-1].isInternal||y?p.lineTo(m.vertices[F].x,m.vertices[F].y):p.moveTo(m.vertices[F].x,m.vertices[F].y),m.vertices[F].isInternal&&!y&&p.moveTo(m.vertices[(F+1)%m.vertices.length].x,m.vertices[(F+1)%m.vertices.length].y);p.lineTo(m.vertices[0].x,m.vertices[0].y),p.closePath()}S.wireframes?(p.lineWidth=1,p.strokeStyle="#bbb",p.stroke()):(p.fillStyle=m.render.fillStyle,m.render.lineWidth&&(p.lineWidth=m.render.lineWidth,p.strokeStyle=m.render.strokeStyle,p.stroke()),p.fill())}p.globalAlpha=1}}},e.bodyWireframes=function(c,g,x){var p=x,S=c.options.showInternalEdges,y,P,m,M,B;for(p.beginPath(),m=0;m<g.length;m++)if(y=g[m],!!y.render.visible)for(B=y.parts.length>1?1:0;B<y.parts.length;B++){for(P=y.parts[B],p.moveTo(P.vertices[0].x,P.vertices[0].y),M=1;M<P.vertices.length;M++)!P.vertices[M-1].isInternal||S?p.lineTo(P.vertices[M].x,P.vertices[M].y):p.moveTo(P.vertices[M].x,P.vertices[M].y),P.vertices[M].isInternal&&!S&&p.moveTo(P.vertices[(M+1)%P.vertices.length].x,P.vertices[(M+1)%P.vertices.length].y);p.lineTo(P.vertices[0].x,P.vertices[0].y)}p.lineWidth=1,p.strokeStyle="#bbb",p.stroke()},e.bodyConvexHulls=function(c,g,x){var p=x,S,y,P;for(p.beginPath(),y=0;y<g.length;y++)if(S=g[y],!(!S.render.visible||S.parts.length===1)){for(p.moveTo(S.vertices[0].x,S.vertices[0].y),P=1;P<S.vertices.length;P++)p.lineTo(S.vertices[P].x,S.vertices[P].y);p.lineTo(S.vertices[0].x,S.vertices[0].y)}p.lineWidth=1,p.strokeStyle="rgba(255,255,255,0.2)",p.stroke()},e.vertexNumbers=function(c,g,x){var p=x,S,y,P;for(S=0;S<g.length;S++){var m=g[S].parts;for(P=m.length>1?1:0;P<m.length;P++){var M=m[P];for(y=0;y<M.vertices.length;y++)p.fillStyle="rgba(255,255,255,0.2)",p.fillText(S+"_"+y,M.position.x+(M.vertices[y].x-M.position.x)*.8,M.position.y+(M.vertices[y].y-M.position.y)*.8)}}},e.mousePosition=function(c,g,x){var p=x;p.fillStyle="rgba(255,255,255,0.8)",p.fillText(g.position.x+"  "+g.position.y,g.position.x+5,g.position.y-5)},e.bodyBounds=function(c,g,x){var p=x;c.engine;var S=c.options;p.beginPath();for(var y=0;y<g.length;y++){var P=g[y];if(P.render.visible)for(var m=g[y].parts,M=m.length>1?1:0;M<m.length;M++){var B=m[M];p.rect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}S.wireframes?p.strokeStyle="rgba(255,255,255,0.08)":p.strokeStyle="rgba(0,0,0,0.1)",p.lineWidth=1,p.stroke()},e.bodyAxes=function(c,g,x){var p=x;c.engine;var S=c.options,y,P,m,M;for(p.beginPath(),P=0;P<g.length;P++){var B=g[P],T=B.parts;if(!!B.render.visible)if(S.showAxes)for(m=T.length>1?1:0;m<T.length;m++)for(y=T[m],M=0;M<y.axes.length;M++){var R=y.axes[M];p.moveTo(y.position.x,y.position.y),p.lineTo(y.position.x+R.x*20,y.position.y+R.y*20)}else for(m=T.length>1?1:0;m<T.length;m++)for(y=T[m],M=0;M<y.axes.length;M++)p.moveTo(y.position.x,y.position.y),p.lineTo((y.vertices[0].x+y.vertices[y.vertices.length-1].x)/2,(y.vertices[0].y+y.vertices[y.vertices.length-1].y)/2)}S.wireframes?(p.strokeStyle="indianred",p.lineWidth=1):(p.strokeStyle="rgba(255, 255, 255, 0.4)",p.globalCompositeOperation="overlay",p.lineWidth=2),p.stroke(),p.globalCompositeOperation="source-over"},e.bodyPositions=function(c,g,x){var p=x;c.engine;var S=c.options,y,P,m,M;for(p.beginPath(),m=0;m<g.length;m++)if(y=g[m],!!y.render.visible)for(M=0;M<y.parts.length;M++)P=y.parts[M],p.arc(P.position.x,P.position.y,3,0,2*Math.PI,!1),p.closePath();for(S.wireframes?p.fillStyle="indianred":p.fillStyle="rgba(0,0,0,0.5)",p.fill(),p.beginPath(),m=0;m<g.length;m++)y=g[m],y.render.visible&&(p.arc(y.positionPrev.x,y.positionPrev.y,2,0,2*Math.PI,!1),p.closePath());p.fillStyle="rgba(255,165,0,0.8)",p.fill()},e.bodyVelocity=function(c,g,x){var p=x;p.beginPath();for(var S=0;S<g.length;S++){var y=g[S];!y.render.visible||(p.moveTo(y.position.x,y.position.y),p.lineTo(y.position.x+(y.position.x-y.positionPrev.x)*2,y.position.y+(y.position.y-y.positionPrev.y)*2))}p.lineWidth=3,p.strokeStyle="cornflowerblue",p.stroke()},e.bodyIds=function(c,g,x){var p=x,S,y;for(S=0;S<g.length;S++)if(!!g[S].render.visible){var P=g[S].parts;for(y=P.length>1?1:0;y<P.length;y++){var m=P[y];p.font="12px Arial",p.fillStyle="rgba(255,255,255,0.5)",p.fillText(m.id,m.position.x+10,m.position.y-10)}}},e.collisions=function(c,g,x){var p=x,S=c.options,y,P,m,M;for(p.beginPath(),m=0;m<g.length;m++)if(y=g[m],!!y.isActive)for(P=y.collision,M=0;M<y.activeContacts.length;M++){var B=y.activeContacts[M],T=B.vertex;p.rect(T.x-1.5,T.y-1.5,3.5,3.5)}for(S.wireframes?p.fillStyle="rgba(255,255,255,0.7)":p.fillStyle="orange",p.fill(),p.beginPath(),m=0;m<g.length;m++)if(y=g[m],!!y.isActive&&(P=y.collision,y.activeContacts.length>0)){var R=y.activeContacts[0].vertex.x,F=y.activeContacts[0].vertex.y;y.activeContacts.length===2&&(R=(y.activeContacts[0].vertex.x+y.activeContacts[1].vertex.x)/2,F=(y.activeContacts[0].vertex.y+y.activeContacts[1].vertex.y)/2),P.bodyB===P.supports[0].body||P.bodyA.isStatic===!0?p.moveTo(R-P.normal.x*8,F-P.normal.y*8):p.moveTo(R+P.normal.x*8,F+P.normal.y*8),p.lineTo(R,F)}S.wireframes?p.strokeStyle="rgba(255,165,0,0.7)":p.strokeStyle="orange",p.lineWidth=1,p.stroke()},e.separations=function(c,g,x){var p=x,S=c.options,y,P,m,M,B;for(p.beginPath(),B=0;B<g.length;B++)if(y=g[B],!!y.isActive){P=y.collision,m=P.bodyA,M=P.bodyB;var T=1;!M.isStatic&&!m.isStatic&&(T=.5),M.isStatic&&(T=0),p.moveTo(M.position.x,M.position.y),p.lineTo(M.position.x-P.penetration.x*T,M.position.y-P.penetration.y*T),T=1,!M.isStatic&&!m.isStatic&&(T=.5),m.isStatic&&(T=0),p.moveTo(m.position.x,m.position.y),p.lineTo(m.position.x+P.penetration.x*T,m.position.y+P.penetration.y*T)}S.wireframes?p.strokeStyle="rgba(255,165,0,0.5)":p.strokeStyle="orange",p.stroke()},e.inspector=function(c,g){c.engine;var x=c.selected,p=c.render,S=p.options,y;if(S.hasBounds){var P=p.bounds.max.x-p.bounds.min.x,m=p.bounds.max.y-p.bounds.min.y,M=P/p.options.width,B=m/p.options.height;g.scale(1/M,1/B),g.translate(-p.bounds.min.x,-p.bounds.min.y)}for(var T=0;T<x.length;T++){var R=x[T].data;switch(g.translate(.5,.5),g.lineWidth=1,g.strokeStyle="rgba(255,165,0,0.9)",g.setLineDash([1,2]),R.type){case"body":y=R.bounds,g.beginPath(),g.rect(Math.floor(y.min.x-3),Math.floor(y.min.y-3),Math.floor(y.max.x-y.min.x+6),Math.floor(y.max.y-y.min.y+6)),g.closePath(),g.stroke();break;case"constraint":var F=R.pointA;R.bodyA&&(F=R.pointB),g.beginPath(),g.arc(F.x,F.y,10,0,2*Math.PI),g.closePath(),g.stroke();break}g.setLineDash([]),g.translate(-.5,-.5)}c.selectStart!==null&&(g.translate(.5,.5),g.lineWidth=1,g.strokeStyle="rgba(255,165,0,0.6)",g.fillStyle="rgba(255,165,0,0.1)",y=c.selectBounds,g.beginPath(),g.rect(Math.floor(y.min.x),Math.floor(y.min.y),Math.floor(y.max.x-y.min.x),Math.floor(y.max.y-y.min.y)),g.closePath(),g.stroke(),g.fill(),g.translate(-.5,-.5)),S.hasBounds&&g.setTransform(1,0,0,1,0,0)};var n=function(c,g){var x=c.engine,p=c.timing,S=p.historySize,y=x.timing.timestamp;p.delta=g-p.lastTime||e._goodDelta,p.lastTime=g,p.timestampElapsed=y-p.lastTimestamp||0,p.lastTimestamp=y,p.deltaHistory.unshift(p.delta),p.deltaHistory.length=Math.min(p.deltaHistory.length,S),p.engineDeltaHistory.unshift(x.timing.lastDelta),p.engineDeltaHistory.length=Math.min(p.engineDeltaHistory.length,S),p.timestampElapsedHistory.unshift(p.timestampElapsed),p.timestampElapsedHistory.length=Math.min(p.timestampElapsedHistory.length,S),p.engineElapsedHistory.unshift(x.timing.lastElapsed),p.engineElapsedHistory.length=Math.min(p.engineElapsedHistory.length,S),p.elapsedHistory.unshift(p.lastElapsed),p.elapsedHistory.length=Math.min(p.elapsedHistory.length,S)},r=function(c){for(var g=0,x=0;x<c.length;x+=1)g+=c[x];return g/c.length||0},u=function(c,g){var x=document.createElement("canvas");return x.width=c,x.height=g,x.oncontextmenu=function(){return!1},x.onselectstart=function(){return!1},x},d=function(c){var g=c.getContext("2d"),x=window.devicePixelRatio||1,p=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1;return x/p},C=function(c,g){var x=c.textures[g];return x||(x=c.textures[g]=new Image,x.src=g,x)},w=function(c,g){var x=g;/(jpg|gif|png)$/.test(g)&&(x="url("+g+")"),c.canvas.style.background=x,c.canvas.style.backgroundSize="contain",c.currentBackground=g}})()},function(A,E){var v={};A.exports=v,function(){v.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(A,E,v){var e={};A.exports=e;var l=v(7),o=v(19),s=v(14),h=v(20),a=v(4),f=v(5),i=v(10),t=v(0),n=v(6);(function(){e.create=function(r){r=r||{};var u={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},d=t.extend(u,r);return d.world=r.world||f.create({label:"World"}),d.pairs=r.pairs||h.create(),d.detector=r.detector||s.create(),d.grid={buckets:[]},d.world.gravity=d.gravity,d.broadphase=d.grid,d.metrics={},d},e.update=function(r,u,d){var C=t.now();u=u||1e3/60,d=d||1;var w=r.world,c=r.detector,g=r.pairs,x=r.timing,p=x.timestamp,S;x.timestamp+=u*x.timeScale,x.lastDelta=u*x.timeScale;var y={timestamp:x.timestamp};a.trigger(r,"beforeUpdate",y);var P=f.allBodies(w),m=f.allConstraints(w);for(w.isModified&&s.setBodies(c,P),w.isModified&&f.setModified(w,!1,!1,!0),r.enableSleeping&&l.update(P,x.timeScale),e._bodiesApplyGravity(P,r.gravity),e._bodiesUpdate(P,u,x.timeScale,d,w.bounds),i.preSolveAll(P),S=0;S<r.constraintIterations;S++)i.solveAll(m,x.timeScale);i.postSolveAll(P),c.pairs=r.pairs;var M=s.collisions(c);for(h.update(g,M,p),r.enableSleeping&&l.afterCollisions(g.list,x.timeScale),g.collisionStart.length>0&&a.trigger(r,"collisionStart",{pairs:g.collisionStart}),o.preSolvePosition(g.list),S=0;S<r.positionIterations;S++)o.solvePosition(g.list,x.timeScale);for(o.postSolvePosition(P),i.preSolveAll(P),S=0;S<r.constraintIterations;S++)i.solveAll(m,x.timeScale);for(i.postSolveAll(P),o.preSolveVelocity(g.list),S=0;S<r.velocityIterations;S++)o.solveVelocity(g.list,x.timeScale);return g.collisionActive.length>0&&a.trigger(r,"collisionActive",{pairs:g.collisionActive}),g.collisionEnd.length>0&&a.trigger(r,"collisionEnd",{pairs:g.collisionEnd}),e._bodiesClearForces(P),a.trigger(r,"afterUpdate",y),r.timing.lastElapsed=t.now()-C,r},e.merge=function(r,u){if(t.extend(r,u),u.world){r.world=u.world,e.clear(r);for(var d=f.allBodies(r.world),C=0;C<d.length;C++){var w=d[C];l.set(w,!1),w.id=t.nextId()}}},e.clear=function(r){h.clear(r.pairs),s.clear(r.detector)},e._bodiesClearForces=function(r){for(var u=0;u<r.length;u++){var d=r[u];d.force.x=0,d.force.y=0,d.torque=0}},e._bodiesApplyGravity=function(r,u){var d=typeof u.scale<"u"?u.scale:.001;if(!(u.x===0&&u.y===0||d===0))for(var C=0;C<r.length;C++){var w=r[C];w.isStatic||w.isSleeping||(w.force.y+=w.mass*u.y*d,w.force.x+=w.mass*u.x*d)}},e._bodiesUpdate=function(r,u,d,C,w){for(var c=0;c<r.length;c++){var g=r[c];g.isStatic||g.isSleeping||n.update(g,u,d,C)}}})()},function(A,E,v){var e={};A.exports=e;var l=v(3),o=v(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(s){var h,a,f,i=s.length;for(h=0;h<i;h++)a=s[h],a.isActive&&(f=a.activeContacts.length,a.collision.parentA.totalContacts+=f,a.collision.parentB.totalContacts+=f)},e.solvePosition=function(s,h){var a,f,i,t,n,r,u,d,C=e._positionDampen,w=s.length;for(a=0;a<w;a++)f=s[a],!(!f.isActive||f.isSensor)&&(i=f.collision,t=i.parentA,n=i.parentB,r=i.normal,f.separation=r.x*(n.positionImpulse.x+i.penetration.x-t.positionImpulse.x)+r.y*(n.positionImpulse.y+i.penetration.y-t.positionImpulse.y));for(a=0;a<w;a++)f=s[a],!(!f.isActive||f.isSensor)&&(i=f.collision,t=i.parentA,n=i.parentB,r=i.normal,d=(f.separation-f.slop)*h,(t.isStatic||n.isStatic)&&(d*=2),t.isStatic||t.isSleeping||(u=C/t.totalContacts,t.positionImpulse.x+=r.x*d*u,t.positionImpulse.y+=r.y*d*u),n.isStatic||n.isSleeping||(u=C/n.totalContacts,n.positionImpulse.x-=r.x*d*u,n.positionImpulse.y-=r.y*d*u))},e.postSolvePosition=function(s){for(var h=e._positionWarming,a=s.length,f=l.translate,i=o.update,t=0;t<a;t++){var n=s[t],r=n.positionImpulse,u=r.x,d=r.y,C=n.velocity;if(n.totalContacts=0,u!==0||d!==0){for(var w=0;w<n.parts.length;w++){var c=n.parts[w];f(c.vertices,r),i(c.bounds,c.vertices,C),c.position.x+=u,c.position.y+=d}n.positionPrev.x+=u,n.positionPrev.y+=d,u*C.x+d*C.y<0?(r.x=0,r.y=0):(r.x*=h,r.y*=h)}}},e.preSolveVelocity=function(s){var h=s.length,a,f;for(a=0;a<h;a++){var i=s[a];if(!(!i.isActive||i.isSensor)){var t=i.activeContacts,n=t.length,r=i.collision,u=r.parentA,d=r.parentB,C=r.normal,w=r.tangent;for(f=0;f<n;f++){var c=t[f],g=c.vertex,x=c.normalImpulse,p=c.tangentImpulse;if(x!==0||p!==0){var S=C.x*x+w.x*p,y=C.y*x+w.y*p;u.isStatic||u.isSleeping||(u.positionPrev.x+=S*u.inverseMass,u.positionPrev.y+=y*u.inverseMass,u.anglePrev+=u.inverseInertia*((g.x-u.position.x)*y-(g.y-u.position.y)*S)),d.isStatic||d.isSleeping||(d.positionPrev.x-=S*d.inverseMass,d.positionPrev.y-=y*d.inverseMass,d.anglePrev-=d.inverseInertia*((g.x-d.position.x)*y-(g.y-d.position.y)*S))}}}}},e.solveVelocity=function(s,h){var a=h*h,f=e._restingThresh*a,i=e._frictionNormalMultiplier,t=e._restingThreshTangent*a,n=Number.MAX_VALUE,r=s.length,u,d,C,w;for(C=0;C<r;C++){var c=s[C];if(!(!c.isActive||c.isSensor)){var g=c.collision,x=g.parentA,p=g.parentB,S=x.velocity,y=p.velocity,P=g.normal.x,m=g.normal.y,M=g.tangent.x,B=g.tangent.y,T=c.activeContacts,R=T.length,F=1/R,V=x.inverseMass+p.inverseMass,W=c.friction*c.frictionStatic*i*a;for(S.x=x.position.x-x.positionPrev.x,S.y=x.position.y-x.positionPrev.y,y.x=p.position.x-p.positionPrev.x,y.y=p.position.y-p.positionPrev.y,x.angularVelocity=x.angle-x.anglePrev,p.angularVelocity=p.angle-p.anglePrev,w=0;w<R;w++){var O=T[w],H=O.vertex,G=H.x-x.position.x,Z=H.y-x.position.y,b=H.x-p.position.x,q=H.y-p.position.y,$=S.x-Z*x.angularVelocity,J=S.y+G*x.angularVelocity,Y=y.x-q*p.angularVelocity,Oe=y.y+b*p.angularVelocity,we=$-Y,Ce=J-Oe,ne=P*we+m*Ce,ee=M*we+B*Ce,Pe=c.separation+ne,pe=Math.min(Pe,1);pe=Pe<0?0:pe;var Me=pe*W;ee>Me||-ee>Me?(d=ee>0?ee:-ee,u=c.friction*(ee>0?1:-1)*a,u<-d?u=-d:u>d&&(u=d)):(u=ee,d=n);var Ae=G*m-Z*P,Be=b*m-q*P,Ie=F/(V+x.inverseInertia*Ae*Ae+p.inverseInertia*Be*Be),oe=(1+c.restitution)*ne*Ie;if(u*=Ie,ne*ne>f&&ne<0)O.normalImpulse=0;else{var We=O.normalImpulse;O.normalImpulse+=oe,O.normalImpulse=Math.min(O.normalImpulse,0),oe=O.normalImpulse-We}if(ee*ee>t)O.tangentImpulse=0;else{var He=O.tangentImpulse;O.tangentImpulse+=u,O.tangentImpulse<-d&&(O.tangentImpulse=-d),O.tangentImpulse>d&&(O.tangentImpulse=d),u=O.tangentImpulse-He}var ae=P*oe+M*u,le=m*oe+B*u;x.isStatic||x.isSleeping||(x.positionPrev.x+=ae*x.inverseMass,x.positionPrev.y+=le*x.inverseMass,x.anglePrev+=(G*le-Z*ae)*x.inverseInertia),p.isStatic||p.isSleeping||(p.positionPrev.x-=ae*p.inverseMass,p.positionPrev.y-=le*p.inverseMass,p.anglePrev-=(b*le-q*ae)*p.inverseInertia)}}}}})()},function(A,E,v){var e={};A.exports=e;var l=v(9),o=v(0);(function(){e.create=function(s){return o.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},s)},e.update=function(s,h,a){var f=s.list,i=f.length,t=s.table,n=h.length,r=s.collisionStart,u=s.collisionEnd,d=s.collisionActive,C,w,c,g;for(r.length=0,u.length=0,d.length=0,g=0;g<i;g++)f[g].confirmedActive=!1;for(g=0;g<n;g++)C=h[g],c=C.pair,c?(c.isActive?d.push(c):r.push(c),l.update(c,C,a),c.confirmedActive=!0):(c=l.create(C,a),t[c.id]=c,r.push(c),f.push(c));var x=[];for(i=f.length,g=0;g<i;g++)c=f[g],c.confirmedActive||(l.setActive(c,!1,a),u.push(c),!c.collision.bodyA.isSleeping&&!c.collision.bodyB.isSleeping&&x.push(g));for(g=0;g<x.length;g++)w=x[g]-g,c=f[w],f.splice(w,1),delete t[c.id]},e.clear=function(s){return s.table={},s.list.length=0,s.collisionStart.length=0,s.collisionActive.length=0,s.collisionEnd.length=0,s}})()},function(A,E,v){var e=A.exports=v(22);e.Axes=v(11),e.Bodies=v(12),e.Body=v(6),e.Bounds=v(1),e.Collision=v(8),e.Common=v(0),e.Composite=v(5),e.Composites=v(23),e.Constraint=v(10),e.Contact=v(17),e.Detector=v(14),e.Engine=v(18),e.Events=v(4),e.Grid=v(24),e.Mouse=v(13),e.MouseConstraint=v(25),e.Pair=v(9),e.Pairs=v(20),e.Plugin=v(15),e.Query=v(26),e.Render=v(16),e.Resolver=v(19),e.Runner=v(27),e.SAT=v(28),e.Sleeping=v(7),e.Svg=v(29),e.Vector=v(2),e.Vertices=v(3),e.World=v(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(A,E,v){var e={};A.exports=e;var l=v(15),o=v(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){l.use(e,Array.prototype.slice.call(arguments))},e.before=function(s,h){return s=s.replace(/^Matter./,""),o.chainPathBefore(e,s,h)},e.after=function(s,h){return s=s.replace(/^Matter./,""),o.chainPathAfter(e,s,h)}})()},function(A,E,v){var e={};A.exports=e;var l=v(5),o=v(10),s=v(0),h=v(6),a=v(12),f=s.deprecated;(function(){e.stack=function(i,t,n,r,u,d,C){for(var w=l.create({label:"Stack"}),c=i,g=t,x,p=0,S=0;S<r;S++){for(var y=0,P=0;P<n;P++){var m=C(c,g,P,S,x,p);if(m){var M=m.bounds.max.y-m.bounds.min.y,B=m.bounds.max.x-m.bounds.min.x;M>y&&(y=M),h.translate(m,{x:B*.5,y:M*.5}),c=m.bounds.max.x+u,l.addBody(w,m),x=m,p+=1}else c+=u}g+=y+d,c=i}return w},e.chain=function(i,t,n,r,u,d){for(var C=i.bodies,w=1;w<C.length;w++){var c=C[w-1],g=C[w],x=c.bounds.max.y-c.bounds.min.y,p=c.bounds.max.x-c.bounds.min.x,S=g.bounds.max.y-g.bounds.min.y,y=g.bounds.max.x-g.bounds.min.x,P={bodyA:c,pointA:{x:p*t,y:x*n},bodyB:g,pointB:{x:y*r,y:S*u}},m=s.extend(P,d);l.addConstraint(i,o.create(m))}return i.label+=" Chain",i},e.mesh=function(i,t,n,r,u){var d=i.bodies,C,w,c,g,x;for(C=0;C<n;C++){for(w=1;w<t;w++)c=d[w-1+C*t],g=d[w+C*t],l.addConstraint(i,o.create(s.extend({bodyA:c,bodyB:g},u)));if(C>0)for(w=0;w<t;w++)c=d[w+(C-1)*t],g=d[w+C*t],l.addConstraint(i,o.create(s.extend({bodyA:c,bodyB:g},u))),r&&w>0&&(x=d[w-1+(C-1)*t],l.addConstraint(i,o.create(s.extend({bodyA:x,bodyB:g},u)))),r&&w<t-1&&(x=d[w+1+(C-1)*t],l.addConstraint(i,o.create(s.extend({bodyA:x,bodyB:g},u))))}return i.label+=" Mesh",i},e.pyramid=function(i,t,n,r,u,d,C){return e.stack(i,t,n,r,u,d,function(w,c,g,x,p,S){var y=Math.min(r,Math.ceil(n/2)),P=p?p.bounds.max.x-p.bounds.min.x:0;if(!(x>y)){x=y-x;var m=x,M=n-1-x;if(!(g<m||g>M)){S===1&&h.translate(p,{x:(g+(n%2===1?1:-1))*P,y:0});var B=p?g*P:0;return C(i+B+g*u,c,g,x,p,S)}}})},e.newtonsCradle=function(i,t,n,r,u){for(var d=l.create({label:"Newtons Cradle"}),C=0;C<n;C++){var w=1.9,c=a.circle(i+C*(r*w),t+u,r,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),g=o.create({pointA:{x:i+C*(r*w),y:t},bodyB:c});l.addBody(d,c),l.addConstraint(d,g)}return d},f(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(i,t,n,r,u){var d=h.nextGroup(!0),C=20,w=-n*.5+C,c=n*.5-C,g=0,x=l.create({label:"Car"}),p=a.rectangle(i,t,n,r,{collisionFilter:{group:d},chamfer:{radius:r*.5},density:2e-4}),S=a.circle(i+w,t+g,u,{collisionFilter:{group:d},friction:.8}),y=a.circle(i+c,t+g,u,{collisionFilter:{group:d},friction:.8}),P=o.create({bodyB:p,pointB:{x:w,y:g},bodyA:S,stiffness:1,length:0}),m=o.create({bodyB:p,pointB:{x:c,y:g},bodyA:y,stiffness:1,length:0});return l.addBody(x,p),l.addBody(x,S),l.addBody(x,y),l.addConstraint(x,P),l.addConstraint(x,m),x},f(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(i,t,n,r,u,d,C,w,c,g){c=s.extend({inertia:1/0},c),g=s.extend({stiffness:.2,render:{type:"line",anchors:!1}},g);var x=e.stack(i,t,n,r,u,d,function(p,S){return a.circle(p,S,w,c)});return e.mesh(x,n,r,C,g),x.label="Soft Body",x},f(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(A,E,v){var e={};A.exports=e;var l=v(9),o=v(0),s=o.deprecated;(function(){e.create=function(h){var a={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(a,h)},e.update=function(h,a,f,i){var t,n,r,u=f.world,d=h.buckets,C,w,c=!1;for(t=0;t<a.length;t++){var g=a[t];if(!(g.isSleeping&&!i)&&!(u.bounds&&(g.bounds.max.x<u.bounds.min.x||g.bounds.min.x>u.bounds.max.x||g.bounds.max.y<u.bounds.min.y||g.bounds.min.y>u.bounds.max.y))){var x=e._getRegion(h,g);if(!g.region||x.id!==g.region.id||i){(!g.region||i)&&(g.region=x);var p=e._regionUnion(x,g.region);for(n=p.startCol;n<=p.endCol;n++)for(r=p.startRow;r<=p.endRow;r++){w=e._getBucketId(n,r),C=d[w];var S=n>=x.startCol&&n<=x.endCol&&r>=x.startRow&&r<=x.endRow,y=n>=g.region.startCol&&n<=g.region.endCol&&r>=g.region.startRow&&r<=g.region.endRow;!S&&y&&y&&C&&e._bucketRemoveBody(h,C,g),(g.region===x||S&&!y||i)&&(C||(C=e._createBucket(d,w)),e._bucketAddBody(h,C,g))}g.region=x,c=!0}}}c&&(h.pairsList=e._createActivePairsList(h))},s(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(h){h.buckets={},h.pairs={},h.pairsList=[]},s(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(h,a){var f=Math.min(h.startCol,a.startCol),i=Math.max(h.endCol,a.endCol),t=Math.min(h.startRow,a.startRow),n=Math.max(h.endRow,a.endRow);return e._createRegion(f,i,t,n)},e._getRegion=function(h,a){var f=a.bounds,i=Math.floor(f.min.x/h.bucketWidth),t=Math.floor(f.max.x/h.bucketWidth),n=Math.floor(f.min.y/h.bucketHeight),r=Math.floor(f.max.y/h.bucketHeight);return e._createRegion(i,t,n,r)},e._createRegion=function(h,a,f,i){return{id:h+","+a+","+f+","+i,startCol:h,endCol:a,startRow:f,endRow:i}},e._getBucketId=function(h,a){return"C"+h+"R"+a},e._createBucket=function(h,a){var f=h[a]=[];return f},e._bucketAddBody=function(h,a,f){var i=h.pairs,t=l.id,n=a.length,r;for(r=0;r<n;r++){var u=a[r];if(!(f.id===u.id||f.isStatic&&u.isStatic)){var d=t(f,u),C=i[d];C?C[2]+=1:i[d]=[f,u,1]}}a.push(f)},e._bucketRemoveBody=function(h,a,f){var i=h.pairs,t=l.id,n;a.splice(o.indexOf(a,f),1);var r=a.length;for(n=0;n<r;n++){var u=i[t(f,a[n])];u&&(u[2]-=1)}},e._createActivePairsList=function(h){var a,f=h.pairs,i=o.keys(f),t=i.length,n=[],r;for(r=0;r<t;r++)a=f[i[r]],a[2]>0?n.push(a):delete f[i[r]];return n}})()},function(A,E,v){var e={};A.exports=e;var l=v(3),o=v(7),s=v(13),h=v(4),a=v(14),f=v(10),i=v(5),t=v(0),n=v(1);(function(){e.create=function(r,u){var d=(r?r.mouse:null)||(u?u.mouse:null);d||(r&&r.render&&r.render.canvas?d=s.create(r.render.canvas):u&&u.element?d=s.create(u.element):(d=s.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var C=f.create({label:"Mouse Constraint",pointA:d.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),w={type:"mouseConstraint",mouse:d,element:null,body:null,constraint:C,collisionFilter:{category:1,mask:4294967295,group:0}},c=t.extend(w,u);return h.on(r,"beforeUpdate",function(){var g=i.allBodies(r.world);e.update(c,g),e._triggerEvents(c)}),c},e.update=function(r,u){var d=r.mouse,C=r.constraint,w=r.body;if(d.button===0){if(C.bodyB)o.set(C.bodyB,!1),C.pointA=d.position;else for(var c=0;c<u.length;c++)if(w=u[c],n.contains(w.bounds,d.position)&&a.canCollide(w.collisionFilter,r.collisionFilter))for(var g=w.parts.length>1?1:0;g<w.parts.length;g++){var x=w.parts[g];if(l.contains(x.vertices,d.position)){C.pointA=d.position,C.bodyB=r.body=w,C.pointB={x:d.position.x-w.position.x,y:d.position.y-w.position.y},C.angleB=w.angle,o.set(w,!1),h.trigger(r,"startdrag",{mouse:d,body:w});break}}}else C.bodyB=r.body=null,C.pointB=null,w&&h.trigger(r,"enddrag",{mouse:d,body:w})},e._triggerEvents=function(r){var u=r.mouse,d=u.sourceEvents;d.mousemove&&h.trigger(r,"mousemove",{mouse:u}),d.mousedown&&h.trigger(r,"mousedown",{mouse:u}),d.mouseup&&h.trigger(r,"mouseup",{mouse:u}),s.clearSourceEvents(u)}})()},function(A,E,v){var e={};A.exports=e;var l=v(2),o=v(8),s=v(1),h=v(12),a=v(3);(function(){e.collides=function(f,i){for(var t=[],n=i.length,r=f.bounds,u=o.collides,d=s.overlaps,C=0;C<n;C++){var w=i[C],c=w.parts.length,g=c===1?0:1;if(d(w.bounds,r))for(var x=g;x<c;x++){var p=w.parts[x];if(d(p.bounds,r)){var S=u(p,f);if(S){t.push(S);break}}}}return t},e.ray=function(f,i,t,n){n=n||1e-100;for(var r=l.angle(i,t),u=l.magnitude(l.sub(i,t)),d=(t.x+i.x)*.5,C=(t.y+i.y)*.5,w=h.rectangle(d,C,u,n,{angle:r}),c=e.collides(w,f),g=0;g<c.length;g+=1){var x=c[g];x.body=x.bodyB=x.bodyA}return c},e.region=function(f,i,t){for(var n=[],r=0;r<f.length;r++){var u=f[r],d=s.overlaps(u.bounds,i);(d&&!t||!d&&t)&&n.push(u)}return n},e.point=function(f,i){for(var t=[],n=0;n<f.length;n++){var r=f[n];if(s.contains(r.bounds,i))for(var u=r.parts.length===1?0:1;u<r.parts.length;u++){var d=r.parts[u];if(s.contains(d.bounds,i)&&a.contains(d.vertices,i)){t.push(r);break}}}return t}})()},function(A,E,v){var e={};A.exports=e;var l=v(4),o=v(18),s=v(0);(function(){var h,a;if(typeof window<"u"&&(h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,a=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!h){var f;h=function(i){f=setTimeout(function(){i(s.now())},1e3/60)},a=function(){clearTimeout(f)}}e.create=function(i){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},n=s.extend(t,i);return n.delta=n.delta||1e3/n.fps,n.deltaMin=n.deltaMin||1e3/n.fps,n.deltaMax=n.deltaMax||1e3/(n.fps*.5),n.fps=1e3/n.delta,n},e.run=function(i,t){return typeof i.positionIterations<"u"&&(t=i,i=e.create()),function n(r){i.frameRequestId=h(n),r&&i.enabled&&e.tick(i,t,r)}(),i},e.tick=function(i,t,n){var r=t.timing,u=1,d,C={timestamp:r.timestamp};l.trigger(i,"beforeTick",C),i.isFixed?d=i.delta:(d=n-i.timePrev||i.delta,i.timePrev=n,i.deltaHistory.push(d),i.deltaHistory=i.deltaHistory.slice(-i.deltaSampleSize),d=Math.min.apply(null,i.deltaHistory),d=d<i.deltaMin?i.deltaMin:d,d=d>i.deltaMax?i.deltaMax:d,u=d/i.delta,i.delta=d),i.timeScalePrev!==0&&(u*=r.timeScale/i.timeScalePrev),r.timeScale===0&&(u=0),i.timeScalePrev=r.timeScale,i.correction=u,i.frameCounter+=1,n-i.counterTimestamp>=1e3&&(i.fps=i.frameCounter*((n-i.counterTimestamp)/1e3),i.counterTimestamp=n,i.frameCounter=0),l.trigger(i,"tick",C),l.trigger(i,"beforeUpdate",C),o.update(t,d,u),l.trigger(i,"afterUpdate",C),l.trigger(i,"afterTick",C)},e.stop=function(i){a(i.frameRequestId)},e.start=function(i,t){e.run(i,t)}})()},function(A,E,v){var e={};A.exports=e;var l=v(8),o=v(0),s=o.deprecated;(function(){e.collides=function(h,a){return l.collides(h,a)},s(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(A,E,v){var e={};A.exports=e,v(1);var l=v(0);(function(){e.pathToVertices=function(o,s){typeof window<"u"&&!("SVGPathSeg"in window)&&l.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var h,a,f,i,t,n,r,u,d,C,w=[],c,g,x=0,p=0,S=0;s=s||15;var y=function(m,M,B){var T=B%2===1&&B>1;if(!d||m!=d.x||M!=d.y){d&&T?(c=d.x,g=d.y):(c=0,g=0);var R={x:c+m,y:g+M};(T||!d)&&(d=R),w.push(R),p=c+m,S=g+M}},P=function(m){var M=m.pathSegTypeAsLetter.toUpperCase();if(M!=="Z"){switch(M){case"M":case"L":case"T":case"C":case"S":case"Q":p=m.x,S=m.y;break;case"H":p=m.x;break;case"V":S=m.y;break}y(p,S,m.pathSegType)}};for(e._svgPathToAbsolute(o),f=o.getTotalLength(),n=[],h=0;h<o.pathSegList.numberOfItems;h+=1)n.push(o.pathSegList.getItem(h));for(r=n.concat();x<f;){if(C=o.getPathSegAtLength(x),t=n[C],t!=u){for(;r.length&&r[0]!=t;)P(r.shift());u=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":i=o.getPointAtLength(x),y(i.x,i.y,0);break}x+=s}for(h=0,a=r.length;h<a;++h)P(r[h]);return w},e._svgPathToAbsolute=function(o){for(var s,h,a,f,i,t,n=o.pathSegList,r=0,u=0,d=n.numberOfItems,C=0;C<d;++C){var w=n.getItem(C),c=w.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(c))"x"in w&&(r=w.x),"y"in w&&(u=w.y);else switch("x1"in w&&(a=r+w.x1),"x2"in w&&(i=r+w.x2),"y1"in w&&(f=u+w.y1),"y2"in w&&(t=u+w.y2),"x"in w&&(r+=w.x),"y"in w&&(u+=w.y),c){case"m":n.replaceItem(o.createSVGPathSegMovetoAbs(r,u),C);break;case"l":n.replaceItem(o.createSVGPathSegLinetoAbs(r,u),C);break;case"h":n.replaceItem(o.createSVGPathSegLinetoHorizontalAbs(r),C);break;case"v":n.replaceItem(o.createSVGPathSegLinetoVerticalAbs(u),C);break;case"c":n.replaceItem(o.createSVGPathSegCurvetoCubicAbs(r,u,a,f,i,t),C);break;case"s":n.replaceItem(o.createSVGPathSegCurvetoCubicSmoothAbs(r,u,i,t),C);break;case"q":n.replaceItem(o.createSVGPathSegCurvetoQuadraticAbs(r,u,a,f),C);break;case"t":n.replaceItem(o.createSVGPathSegCurvetoQuadraticSmoothAbs(r,u),C);break;case"a":n.replaceItem(o.createSVGPathSegArcAbs(r,u,w.r1,w.r2,w.angle,w.largeArcFlag,w.sweepFlag),C);break;case"z":case"Z":r=s,u=h;break}(c=="M"||c=="m")&&(s=r,h=u)}}})()},function(A,E,v){var e={};A.exports=e;var l=v(5);v(0),function(){e.create=l.create,e.add=l.add,e.remove=l.remove,e.clear=l.clear,e.addComposite=l.addComposite,e.addBody=l.addBody,e.addConstraint=l.addConstraint}()}])})})(D);class _{constructor(L,A,E,v,e={}){U(this,"_width");U(this,"_height");U(this,"_rect");this._width=E,this._height=v,this._rect=D.exports.Bodies.rectangle(L,A,E,v,e)}get width(){return this._width}get height(){return this._height}get rect(){return this._rect}}class Te{constructor(L,A){U(this,"_head");U(this,"_body");U(this,"_leftLeg");U(this,"_rightLeg");U(this,"_leftArm");U(this,"_rightArm");U(this,"_ragdoll");this._head=D.exports.Bodies.circle(L,A,20,{density:5e-4}),this._body=new _(this._head.position.x,this._head.position.y+5,10,60),this._leftLeg=new _(this._body.rect.position.x-5,this._body.rect.position.y+this._body.height/2+5,10,50),this._rightLeg=new _(this._body.rect.position.x+5,this._body.rect.position.y+this._body.height/2+5,10,50),this._leftArm=new _(this._body.rect.position.x-this._body.width/2-5,this._body.rect.position.y-this._body.height/5,10,50),this._rightArm=new _(this._body.rect.position.x+this._body.width/2+5,this._body.rect.position.y-this._body.height/5,10,50);let E=D.exports.Constraint.create({bodyA:this._head,bodyB:this._body.rect,pointA:{x:0,y:10},pointB:{x:0,y:-25},length:15}),v=D.exports.Constraint.create({bodyA:this._body.rect,bodyB:this._leftLeg.rect,pointA:{x:-5,y:this._body.height/2},pointB:{x:0,y:-this._leftLeg.height/2},length:5}),e=D.exports.Constraint.create({bodyA:this._body.rect,bodyB:this._rightLeg.rect,pointA:{x:5,y:this._body.height/2},pointB:{x:0,y:-this._rightLeg.height/2},length:5}),l=D.exports.Constraint.create({bodyA:this._body.rect,bodyB:this._leftArm.rect,pointA:{x:-this._body.width/2,y:-this._body.height/3},pointB:{x:0,y:-this._leftArm.height/2},length:5}),o=D.exports.Constraint.create({bodyA:this._body.rect,bodyB:this._rightArm.rect,pointA:{x:this._body.width/2,y:-this._body.height/3},pointB:{x:0,y:-this._rightArm.height/2},length:5});this._ragdoll=D.exports.Composite.create({bodies:[this._head,this._body.rect,this._leftLeg.rect,this._rightLeg.rect,this._leftArm.rect,this._rightArm.rect],constraints:[E,v,e,l,o]})}get head(){return this._head}get body(){return this._body}get leftLeg(){return this._leftLeg}get rightLeg(){return this._rightLeg}get leftArm(){return this._leftArm}get rightArm(){return this._rightArm}get ragdoll(){return this._ragdoll}}class Ue{constructor(L,A,E="white",v){U(this,"_x");U(this,"_y");U(this,"_color");U(this,"_radius");U(this,"_xVelocity");U(this,"_yVelocity");U(this,"_radiusDecay");let e=(v==null?void 0:v.maxSize)||50,l=(v==null?void 0:v.maxVelocity)||15,o=(v==null?void 0:v.radiusDecay)||3;this._x=L,this._y=A,this._color=E,this._radius=Math.random()*e,this._xVelocity=Math.random()*l*(Math.random()<.5?-1:1),this._yVelocity=Math.random()*l*(Math.random()<.5?-1:1),this._radiusDecay=o}update(){this._radius>=.2&&(this._radius-=this._radiusDecay,this._x+=this._xVelocity,this._y+=this._yVelocity)}get x(){return this._x}get y(){return this._y}get color(){return this._color}get radius(){return this._radius}}class Ne{constructor(L,A,E){U(this,"_points");U(this,"_canvas");U(this,"_web");this._points=[],this._canvas=E;let v=10,e=10,l=50,o=[];for(let t=0;t<e;t++){let n=[];for(let r=0;r<v;r++){let u=D.exports.Bodies.circle(t*l+L,r*l+A,5,{density:.01});n.push(u),o.push(u)}this._points.push(n)}let s=[];for(let t=0;t<this._points.length;t++)for(let n=0;n<this._points[t].length;n++)t<this._points.length-1&&s.push(D.exports.Constraint.create({bodyA:this._points[t][n],bodyB:this._points[t+1][n],length:20,stiffness:.05})),n<this._points[t].length-1&&s.push(D.exports.Constraint.create({bodyA:this._points[t][n],bodyB:this._points[t][n+1],length:20,stiffness:.05}));let h=this._points[0][0],a=this._points[0][this._points[0].length-1],f=this._points[this._points.length-1][0],i=this._points[this._points.length-1][this._points[this._points.length-1].length-1];s.push(D.exports.Constraint.create({bodyA:h,pointB:{x:h.position.x,y:h.position.y},stiffness:1,length:0})),s.push(D.exports.Constraint.create({bodyA:a,pointB:{x:a.position.x,y:a.position.y},stiffness:1,length:0})),s.push(D.exports.Constraint.create({bodyA:f,pointB:{x:f.position.x,y:f.position.y},stiffness:1,length:0})),s.push(D.exports.Constraint.create({bodyA:i,pointB:{x:i.position.x,y:i.position.y},stiffness:1,length:0})),this._web=D.exports.Composite.create({bodies:o,constraints:s})}draw(){let L=this._canvas.getContext("2d");this._web.constraints.forEach(A=>{L.beginPath(),A.bodyB&&(L.moveTo(A.bodyA.position.x,A.bodyA.position.y),L.lineTo(A.bodyB.position.x,A.bodyB.position.y)),L.lineWidth=1,L.strokeStyle="white",L.stroke()}),this._web.bodies.forEach(A=>{L.beginPath(),L.arc(A.position.x,A.position.y,A.circleRadius,0,2*Math.PI),L.fillStyle="white",L.fill()})}get web(){return this._web}}const N=document.getElementById("canvas"),k=N.getContext("2d");N.width=window.innerWidth;N.height=window.innerHeight*.94;let K="grab",se=[],X,xe=!1,me=!1,Ee=.02,ye=[],ue=[],he=[],fe=null,ve=[],Se=null,ce=!0,ze=1,ge=[],z=D.exports.Engine.create({gravity:{x:0,y:1}}),Qe=D.exports.Runner.create(),te=[new Te(N.width/2,N.height/2)],Le=new _(N.width/2,N.height+1e3,N.width+1e3,2020,{isStatic:!0}),Re=new _(N.width/2,-1e3,N.width+1e3,2020,{isStatic:!0}),Fe=new _(-1e3,N.height/2,2020,N.height+1e3,{isStatic:!0}),ke=new _(N.width+1e3,N.height/2,2020,N.height+1e3,{isStatic:!0}),Q=D.exports.Mouse.create(N),j=D.exports.MouseConstraint.create(z,{mouse:Q,constraint:{stiffness:Ee}});D.exports.Composite.add(z.world,[Le.rect,Re.rect,Fe.rect,ke.rect,j]);te.forEach(I=>{D.exports.Composite.add(z.world,I.ragdoll)});D.exports.Runner.run(Qe,z);const Ze=()=>{let I=new Te(Math.random()*N.width,Math.random()*N.height);te.push(I),D.exports.Composite.add(z.world,I.ragdoll)},Ke=()=>{te.forEach(I=>{D.exports.Composite.remove(z.world,I.ragdoll)}),te=[],De()},De=()=>{se.forEach(I=>{D.exports.Composite.remove(z.world,I)}),ue.forEach(I=>{D.exports.Composite.remove(z.world,I.rect)}),he.forEach(I=>{D.exports.Composite.remove(z.world,I)}),ve.forEach(I=>{D.exports.Composite.remove(z.world,I)}),ge.forEach(I=>{D.exports.Composite.remove(z.world,I.web)}),se=[],ue=[],he=[],ve=[],ge=[]},$e=()=>{K=document.getElementById("tool-select").value,K==="grab"?j.constraint.stiffness=Ee:K==="ball"&&(j.constraint.stiffness=1)},Je=(I,L)=>{for(let A=0;A<100;A++){let E=Math.random()<.5?"red":"orange";ye.push(new Ue(I,L,E))}};D.exports.Events.on(j,"mousedown",I=>{if(K==="ball"){let L=D.exports.Bodies.circle(Q.position.x,Q.position.y,15,{restitution:1});se.push(L),X=D.exports.Constraint.create({pointA:{x:Q.position.x,y:Q.position.y},bodyB:L,stiffness:.005}),D.exports.Composite.add(z.world,[L,X]),me=!0}else if(K==="explode"){Je(Q.position.x,Q.position.y);let L=[];te.forEach(E=>{L.push(E.body.rect)}),se.forEach(E=>{L.push(E)});let A=200;for(let E=0;E<360;E+=5){let v=A*Math.cos(E*Math.PI/180),e=A*Math.sin(E*Math.PI/180);D.exports.Query.ray(L,{x:Q.position.x,y:Q.position.y},{x:v+Q.position.x,y:e+Q.position.y}).forEach(o=>{D.exports.Body.applyForce(o.bodyB,{x:o.bodyB.position.x,y:o.bodyB.position.y},{x:v/2e3,y:e/2e3})})}}else if(K==="block"){let L=new _(Q.position.x,Q.position.y,100,100,{density:1,friction:1,frictionAir:0});ue.push(L),D.exports.Composite.add(z.world,L.rect)}else if(K==="grapple"){if(j.body)if(!fe)fe=j.body;else{let L=D.exports.Constraint.create({bodyA:fe,bodyB:j.body,length:50,stiffness:.01});he.push(L),D.exports.Composite.add(z.world,L),fe=null}}else if(K==="pin")Se=j.body;else if(K==="antiGravity")ce=!ce,ce?z.gravity={x:0,y:ze,scale:.001}:z.gravity={x:0,y:0,scale:.001};else if(K==="web"){let L=new Ne(Q.position.x,Q.position.y,N);ge.push(L),D.exports.Composite.add(z.world,L.web)}});D.exports.Events.on(j,"mouseup",I=>{if(K==="ball")xe=!0;else if(K==="pin"&&Se){let L=D.exports.Constraint.create({bodyA:Se,pointB:{x:Q.position.x,y:Q.position.y},stiffness:.01,length:10});D.exports.Composite.add(z.world,L),ve.push(L)}});const Ve=(I,L="DodgerBlue")=>{k.beginPath(),k.arc(I.position.x,I.position.y,I.circleRadius,0,2*Math.PI),k.fillStyle=L,k.fill()},ie=(I,L="DodgerBlue")=>{let A=I.rect;k.beginPath(),k.save(),k.translate(A.position.x,A.position.y),k.rotate(A.angle),k.moveTo(0,-I.height/2),k.lineTo(0,I.height/2),k.lineCap="round",k.lineWidth=I.width,k.strokeStyle=L,k.stroke(),k.restore()},re=(I,L="DodgerBlue",A=!0)=>{let E=I.rect;k.beginPath(),k.save(),k.translate(E.position.x,E.position.y),k.rotate(E.angle),k.rect(-I.width/2,-I.height/2,I.width,I.height),A?(k.fillStyle=L,k.fill()):(k.strokeStyle=L,k.stroke()),k.restore()},Xe=()=>{k.beginPath(),k.moveTo(Q.position.x,Q.position.y),k.lineTo(j.body.position.x,j.body.position.y),k.lineWidth=1,k.strokeStyle="white",k.stroke()},Ye=()=>{he.forEach(I=>{k.beginPath(),k.moveTo(I.bodyA.position.x,I.bodyA.position.y),k.lineTo(I.bodyB.position.x,I.bodyB.position.y),k.lineWidth=1,k.strokeStyle="white",k.stroke()})},je=()=>{ve.forEach(I=>{k.beginPath(),k.moveTo(I.bodyA.position.x,I.bodyA.position.y),k.lineTo(I.pointB.x,I.pointB.y),k.lineWidth=1,k.strokeStyle="white",k.stroke()})},qe=()=>{k.beginPath(),k.moveTo(X.pointA.x,X.pointA.y),k.lineTo(X.bodyB.position.x,X.bodyB.position.y),k.lineWidth=1,k.strokeStyle="white",k.stroke(),k.beginPath(),k.arc(X.bodyB.position.x,X.bodyB.position.y,5,0,2*Math.PI),k.fillStyle="white",k.fill()},_e=()=>{te.forEach(I=>{Ve(I.head),ie(I.body),ie(I.leftLeg),ie(I.rightLeg),ie(I.leftArm),ie(I.rightArm),ce&&D.exports.Body.applyForce(I.head,{x:I.head.position.x,y:I.head.position.y},{x:0,y:-.002})})},et=()=>{se.forEach(I=>{Ve(I,"#FF7850")})},tt=()=>{ye.forEach((I,L)=>{k.beginPath(),k.arc(I.x,I.y,I.radius,0,2*Math.PI),k.fillStyle=I.color,k.fill(),I.update(),I.radius<.2&&ye.splice(L,1)})},nt=()=>{ue.forEach(I=>{re(I,"white")})},it=()=>{ge.forEach(I=>{I.draw()})};D.exports.Events.on(z,"afterUpdate",I=>{k.clearRect(0,0,N.width,N.height),_e(),et(),nt(),Ye(),je(),it(),re(Le,"#868686"),re(Re,"#868686"),re(Fe,"#868686"),re(ke,"#868686"),tt(),K==="grab"?j.body&&Xe():K==="ball"&&(me&&qe(),xe&&Math.abs(X.bodyB.position.x-X.pointA.x)<20&&Math.abs(X.bodyB.position.y-X.pointA.y)<20&&(D.exports.Composite.remove(z.world,X),xe=!1,me=!1))});window.spawnRagdoll=Ze;window.reset=Ke;window.updateTool=$e;window.clearObjects=De;
